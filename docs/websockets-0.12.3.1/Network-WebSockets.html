<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8" /><title>Network.WebSockets</title><link href="ocean.css" rel="stylesheet" type="text/css" title="Ocean" /><script src="haddock-util.js" type="text/javascript"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script><script type="text/javascript">//<![CDATA[
window.onload = function () {pageLoad();};
//]]>
</script></head><body><div id="package-header"><ul class="links" id="page-menu"><li><a href="src/Network.WebSockets.html">Source</a></li><li><a href="index.html">Contents</a></li><li><a href="doc-index.html">Index</a></li></ul><p class="caption">websockets-0.12.3.1: A sensible and clean way to write WebSocket-capable servers in Haskell.</p></div><div id="content"><div id="module-header"><table class="info"><tr><th>Safe Haskell</th><td>None</td></tr><tr><th>Language</th><td>Haskell98</td></tr></table><p class="caption">Network.WebSockets</p></div><div id="table-of-contents"><p class="caption">Contents</p><ul><li><a href="#g:1">Incoming connections and handshaking</a></li><li><a href="#g:2">Main connection type</a></li><li><a href="#g:3">Options for connections</a><ul><li><a href="#g:4">Compression options</a></li><li><a href="#g:5">Protection limits</a></li></ul></li><li><a href="#g:6">Sending and receiving messages</a></li><li><a href="#g:7">HTTP Types</a></li><li><a href="#g:8">WebSocket message types</a></li><li><a href="#g:9">Exceptions</a></li><li><a href="#g:10">Running a standalone server</a></li><li><a href="#g:11">Utilities for writing your own server</a></li><li><a href="#g:12">Running a client</a></li><li><a href="#g:13">Utilities</a></li></ul></div><div id="synopsis"><p id="control.syn" class="caption expander" onclick="toggleSection('syn')">Synopsis</p><ul id="section.syn" class="hide" onclick="toggleSection('syn')"><li class="src short"><span class="keyword">data</span> <a href="#t:PendingConnection">PendingConnection</a></li><li class="src short"><a href="#v:pendingRequest">pendingRequest</a> :: <a href="Network-WebSockets.html#t:PendingConnection">PendingConnection</a> -&gt; <a href="Network-WebSockets.html#t:RequestHead">RequestHead</a></li><li class="src short"><a href="#v:acceptRequest">acceptRequest</a> :: <a href="Network-WebSockets.html#t:PendingConnection">PendingConnection</a> -&gt; <a href="../base-4.10.1.0/System-IO.html#t:IO">IO</a> <a href="Network-WebSockets.html#t:Connection">Connection</a></li><li class="src short"><span class="keyword">data</span> <a href="#t:AcceptRequest">AcceptRequest</a> = <a href="#v:AcceptRequest">AcceptRequest</a> {<ul class="subs"><li><a href="#v:acceptSubprotocol">acceptSubprotocol</a> :: !(<a href="../base-4.10.1.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="../bytestring-0.10.8.2/Data-ByteString.html#t:ByteString">ByteString</a>)</li><li><a href="#v:acceptHeaders">acceptHeaders</a> :: !<a href="Network-WebSockets.html#t:Headers">Headers</a></li></ul>}</li><li class="src short"><a href="#v:defaultAcceptRequest">defaultAcceptRequest</a> :: <a href="Network-WebSockets.html#t:AcceptRequest">AcceptRequest</a></li><li class="src short"><a href="#v:acceptRequestWith">acceptRequestWith</a> :: <a href="Network-WebSockets.html#t:PendingConnection">PendingConnection</a> -&gt; <a href="Network-WebSockets.html#t:AcceptRequest">AcceptRequest</a> -&gt; <a href="../base-4.10.1.0/System-IO.html#t:IO">IO</a> <a href="Network-WebSockets.html#t:Connection">Connection</a></li><li class="src short"><a href="#v:rejectRequest">rejectRequest</a> :: <a href="Network-WebSockets.html#t:PendingConnection">PendingConnection</a> -&gt; <a href="../bytestring-0.10.8.2/Data-ByteString.html#t:ByteString">ByteString</a> -&gt; <a href="../base-4.10.1.0/System-IO.html#t:IO">IO</a> ()</li><li class="src short"><span class="keyword">data</span> <a href="#t:RejectRequest">RejectRequest</a> = <a href="#v:RejectRequest">RejectRequest</a> {<ul class="subs"><li><a href="#v:rejectCode">rejectCode</a> :: !<a href="../base-4.10.1.0/Data-Int.html#t:Int">Int</a></li><li><a href="#v:rejectMessage">rejectMessage</a> :: !<a href="../bytestring-0.10.8.2/Data-ByteString.html#t:ByteString">ByteString</a></li><li><a href="#v:rejectHeaders">rejectHeaders</a> :: <a href="Network-WebSockets.html#t:Headers">Headers</a></li><li><a href="#v:rejectBody">rejectBody</a> :: !<a href="../bytestring-0.10.8.2/Data-ByteString.html#t:ByteString">ByteString</a></li></ul>}</li><li class="src short"><a href="#v:defaultRejectRequest">defaultRejectRequest</a> :: <a href="Network-WebSockets.html#t:RejectRequest">RejectRequest</a></li><li class="src short"><a href="#v:rejectRequestWith">rejectRequestWith</a> :: <a href="Network-WebSockets.html#t:PendingConnection">PendingConnection</a> -&gt; <a href="Network-WebSockets.html#t:RejectRequest">RejectRequest</a> -&gt; <a href="../base-4.10.1.0/System-IO.html#t:IO">IO</a> ()</li><li class="src short"><span class="keyword">data</span> <a href="#t:Connection">Connection</a></li><li class="src short"><span class="keyword">data</span> <a href="#t:ConnectionOptions">ConnectionOptions</a> = <a href="#v:ConnectionOptions">ConnectionOptions</a> {<ul class="subs"><li><a href="#v:connectionOnPong">connectionOnPong</a> :: !(<a href="../base-4.10.1.0/System-IO.html#t:IO">IO</a> ())</li><li><a href="#v:connectionCompressionOptions">connectionCompressionOptions</a> :: !<a href="Network-WebSockets.html#t:CompressionOptions">CompressionOptions</a></li><li><a href="#v:connectionStrictUnicode">connectionStrictUnicode</a> :: !<a href="../base-4.10.1.0/Data-Bool.html#t:Bool">Bool</a></li><li><a href="#v:connectionFramePayloadSizeLimit">connectionFramePayloadSizeLimit</a> :: !<a href="Network-WebSockets.html#t:SizeLimit">SizeLimit</a></li><li><a href="#v:connectionMessageDataSizeLimit">connectionMessageDataSizeLimit</a> :: !<a href="Network-WebSockets.html#t:SizeLimit">SizeLimit</a></li></ul>}</li><li class="src short"><a href="#v:defaultConnectionOptions">defaultConnectionOptions</a> :: <a href="Network-WebSockets.html#t:ConnectionOptions">ConnectionOptions</a></li><li class="src short"><span class="keyword">data</span> <a href="#t:CompressionOptions">CompressionOptions</a><ul class="subs"><li>= <a href="#v:NoCompression">NoCompression</a></li><li>| <a href="#v:PermessageDeflateCompression">PermessageDeflateCompression</a> <a href="Network-WebSockets.html#t:PermessageDeflate">PermessageDeflate</a></li></ul></li><li class="src short"><span class="keyword">data</span> <a href="#t:PermessageDeflate">PermessageDeflate</a> = <a href="#v:PermessageDeflate">PermessageDeflate</a> {<ul class="subs"><li><a href="#v:serverNoContextTakeover">serverNoContextTakeover</a> :: <a href="../base-4.10.1.0/Data-Bool.html#t:Bool">Bool</a></li><li><a href="#v:clientNoContextTakeover">clientNoContextTakeover</a> :: <a href="../base-4.10.1.0/Data-Bool.html#t:Bool">Bool</a></li><li><a href="#v:serverMaxWindowBits">serverMaxWindowBits</a> :: <a href="../base-4.10.1.0/Data-Int.html#t:Int">Int</a></li><li><a href="#v:clientMaxWindowBits">clientMaxWindowBits</a> :: <a href="../base-4.10.1.0/Data-Int.html#t:Int">Int</a></li><li><a href="#v:pdCompressionLevel">pdCompressionLevel</a> :: <a href="../base-4.10.1.0/Data-Int.html#t:Int">Int</a></li></ul>}</li><li class="src short"><a href="#v:defaultPermessageDeflate">defaultPermessageDeflate</a> :: <a href="Network-WebSockets.html#t:PermessageDeflate">PermessageDeflate</a></li><li class="src short"><span class="keyword">data</span> <a href="#t:SizeLimit">SizeLimit</a><ul class="subs"><li>= <a href="#v:NoSizeLimit">NoSizeLimit</a></li><li>| <a href="#v:SizeLimit">SizeLimit</a> !<a href="../base-4.10.1.0/Data-Int.html#t:Int64">Int64</a></li></ul></li><li class="src short"><a href="#v:receive">receive</a> :: <a href="Network-WebSockets.html#t:Connection">Connection</a> -&gt; <a href="../base-4.10.1.0/System-IO.html#t:IO">IO</a> <a href="Network-WebSockets.html#t:Message">Message</a></li><li class="src short"><a href="#v:receiveDataMessage">receiveDataMessage</a> :: <a href="Network-WebSockets.html#t:Connection">Connection</a> -&gt; <a href="../base-4.10.1.0/System-IO.html#t:IO">IO</a> <a href="Network-WebSockets.html#t:DataMessage">DataMessage</a></li><li class="src short"><a href="#v:receiveData">receiveData</a> :: <a href="Network-WebSockets.html#t:WebSocketsData">WebSocketsData</a> a =&gt; <a href="Network-WebSockets.html#t:Connection">Connection</a> -&gt; <a href="../base-4.10.1.0/System-IO.html#t:IO">IO</a> a</li><li class="src short"><a href="#v:send">send</a> :: <a href="Network-WebSockets.html#t:Connection">Connection</a> -&gt; <a href="Network-WebSockets.html#t:Message">Message</a> -&gt; <a href="../base-4.10.1.0/System-IO.html#t:IO">IO</a> ()</li><li class="src short"><a href="#v:sendDataMessage">sendDataMessage</a> :: <a href="Network-WebSockets.html#t:Connection">Connection</a> -&gt; <a href="Network-WebSockets.html#t:DataMessage">DataMessage</a> -&gt; <a href="../base-4.10.1.0/System-IO.html#t:IO">IO</a> ()</li><li class="src short"><a href="#v:sendTextData">sendTextData</a> :: <a href="Network-WebSockets.html#t:WebSocketsData">WebSocketsData</a> a =&gt; <a href="Network-WebSockets.html#t:Connection">Connection</a> -&gt; a -&gt; <a href="../base-4.10.1.0/System-IO.html#t:IO">IO</a> ()</li><li class="src short"><a href="#v:sendTextDatas">sendTextDatas</a> :: <a href="Network-WebSockets.html#t:WebSocketsData">WebSocketsData</a> a =&gt; <a href="Network-WebSockets.html#t:Connection">Connection</a> -&gt; [a] -&gt; <a href="../base-4.10.1.0/System-IO.html#t:IO">IO</a> ()</li><li class="src short"><a href="#v:sendBinaryData">sendBinaryData</a> :: <a href="Network-WebSockets.html#t:WebSocketsData">WebSocketsData</a> a =&gt; <a href="Network-WebSockets.html#t:Connection">Connection</a> -&gt; a -&gt; <a href="../base-4.10.1.0/System-IO.html#t:IO">IO</a> ()</li><li class="src short"><a href="#v:sendClose">sendClose</a> :: <a href="Network-WebSockets.html#t:WebSocketsData">WebSocketsData</a> a =&gt; <a href="Network-WebSockets.html#t:Connection">Connection</a> -&gt; a -&gt; <a href="../base-4.10.1.0/System-IO.html#t:IO">IO</a> ()</li><li class="src short"><a href="#v:sendPing">sendPing</a> :: <a href="Network-WebSockets.html#t:WebSocketsData">WebSocketsData</a> a =&gt; <a href="Network-WebSockets.html#t:Connection">Connection</a> -&gt; a -&gt; <a href="../base-4.10.1.0/System-IO.html#t:IO">IO</a> ()</li><li class="src short"><span class="keyword">type</span> <a href="#t:Headers">Headers</a> = [(<a href="../case-insensitive-1.2.0.10/Data-CaseInsensitive.html#t:CI">CI</a> <a href="../bytestring-0.10.8.2/Data-ByteString.html#t:ByteString">ByteString</a>, <a href="../bytestring-0.10.8.2/Data-ByteString.html#t:ByteString">ByteString</a>)]</li><li class="src short"><span class="keyword">data</span> <a href="#t:Request">Request</a> = <a href="#v:Request">Request</a> <a href="Network-WebSockets.html#t:RequestHead">RequestHead</a> <a href="../bytestring-0.10.8.2/Data-ByteString.html#t:ByteString">ByteString</a></li><li class="src short"><span class="keyword">data</span> <a href="#t:RequestHead">RequestHead</a> = <a href="#v:RequestHead">RequestHead</a> {<ul class="subs"><li><a href="#v:requestPath">requestPath</a> :: !<a href="../bytestring-0.10.8.2/Data-ByteString.html#t:ByteString">ByteString</a></li><li><a href="#v:requestHeaders">requestHeaders</a> :: <a href="Network-WebSockets.html#t:Headers">Headers</a></li><li><a href="#v:requestSecure">requestSecure</a> :: <a href="../base-4.10.1.0/Data-Bool.html#t:Bool">Bool</a></li></ul>}</li><li class="src short"><a href="#v:getRequestSubprotocols">getRequestSubprotocols</a> :: <a href="Network-WebSockets.html#t:RequestHead">RequestHead</a> -&gt; [<a href="../bytestring-0.10.8.2/Data-ByteString.html#t:ByteString">ByteString</a>]</li><li class="src short"><span class="keyword">data</span> <a href="#t:Response">Response</a> = <a href="#v:Response">Response</a> <a href="Network-WebSockets.html#t:ResponseHead">ResponseHead</a> <a href="../bytestring-0.10.8.2/Data-ByteString.html#t:ByteString">ByteString</a></li><li class="src short"><span class="keyword">data</span> <a href="#t:ResponseHead">ResponseHead</a> = <a href="#v:ResponseHead">ResponseHead</a> {<ul class="subs"><li><a href="#v:responseCode">responseCode</a> :: !<a href="../base-4.10.1.0/Data-Int.html#t:Int">Int</a></li><li><a href="#v:responseMessage">responseMessage</a> :: !<a href="../bytestring-0.10.8.2/Data-ByteString.html#t:ByteString">ByteString</a></li><li><a href="#v:responseHeaders">responseHeaders</a> :: <a href="Network-WebSockets.html#t:Headers">Headers</a></li></ul>}</li><li class="src short"><span class="keyword">data</span> <a href="#t:Message">Message</a><ul class="subs"><li>= <a href="#v:ControlMessage">ControlMessage</a> <a href="Network-WebSockets.html#t:ControlMessage">ControlMessage</a></li><li>| <a href="#v:DataMessage">DataMessage</a> <a href="../base-4.10.1.0/Data-Bool.html#t:Bool">Bool</a> <a href="../base-4.10.1.0/Data-Bool.html#t:Bool">Bool</a> <a href="../base-4.10.1.0/Data-Bool.html#t:Bool">Bool</a> <a href="Network-WebSockets.html#t:DataMessage">DataMessage</a></li></ul></li><li class="src short"><span class="keyword">data</span> <a href="#t:ControlMessage">ControlMessage</a><ul class="subs"><li>= <a href="#v:Close">Close</a> <a href="../base-4.10.1.0/Data-Word.html#t:Word16">Word16</a> <a href="../bytestring-0.10.8.2/Data-ByteString-Lazy.html#t:ByteString">ByteString</a></li><li>| <a href="#v:Ping">Ping</a> <a href="../bytestring-0.10.8.2/Data-ByteString-Lazy.html#t:ByteString">ByteString</a></li><li>| <a href="#v:Pong">Pong</a> <a href="../bytestring-0.10.8.2/Data-ByteString-Lazy.html#t:ByteString">ByteString</a></li></ul></li><li class="src short"><span class="keyword">data</span> <a href="#t:DataMessage">DataMessage</a><ul class="subs"><li>= <a href="#v:Text">Text</a> <a href="../bytestring-0.10.8.2/Data-ByteString-Lazy.html#t:ByteString">ByteString</a> (<a href="../base-4.10.1.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="../text-1.2.2.2/Data-Text-Lazy.html#t:Text">Text</a>)</li><li>| <a href="#v:Binary">Binary</a> <a href="../bytestring-0.10.8.2/Data-ByteString-Lazy.html#t:ByteString">ByteString</a></li></ul></li><li class="src short"><span class="keyword">class</span> <a href="#t:WebSocketsData">WebSocketsData</a> a <span class="keyword">where</span><ul class="subs"></ul></li><li class="src short"><span class="keyword">data</span> <a href="#t:HandshakeException">HandshakeException</a><ul class="subs"><li>= <a href="#v:NotSupported">NotSupported</a></li><li>| <a href="#v:MalformedRequest">MalformedRequest</a> <a href="Network-WebSockets.html#t:RequestHead">RequestHead</a> <a href="../base-4.10.1.0/Data-String.html#t:String">String</a></li><li>| <a href="#v:MalformedResponse">MalformedResponse</a> <a href="Network-WebSockets.html#t:ResponseHead">ResponseHead</a> <a href="../base-4.10.1.0/Data-String.html#t:String">String</a></li><li>| <a href="#v:RequestRejected">RequestRejected</a> <a href="Network-WebSockets.html#t:Request">Request</a> <a href="../base-4.10.1.0/Data-String.html#t:String">String</a></li><li>| <a href="#v:OtherHandshakeException">OtherHandshakeException</a> <a href="../base-4.10.1.0/Data-String.html#t:String">String</a></li></ul></li><li class="src short"><span class="keyword">data</span> <a href="#t:ConnectionException">ConnectionException</a><ul class="subs"><li>= <a href="#v:CloseRequest">CloseRequest</a> <a href="../base-4.10.1.0/Data-Word.html#t:Word16">Word16</a> <a href="../bytestring-0.10.8.2/Data-ByteString-Lazy.html#t:ByteString">ByteString</a></li><li>| <a href="#v:ConnectionClosed">ConnectionClosed</a></li><li>| <a href="#v:ParseException">ParseException</a> <a href="../base-4.10.1.0/Data-String.html#t:String">String</a></li><li>| <a href="#v:UnicodeException">UnicodeException</a> <a href="../base-4.10.1.0/Data-String.html#t:String">String</a></li></ul></li><li class="src short"><span class="keyword">type</span> <a href="#t:ServerApp">ServerApp</a> = <a href="Network-WebSockets.html#t:PendingConnection">PendingConnection</a> -&gt; <a href="../base-4.10.1.0/System-IO.html#t:IO">IO</a> ()</li><li class="src short"><a href="#v:runServer">runServer</a> :: <a href="../base-4.10.1.0/Data-String.html#t:String">String</a> -&gt; <a href="../base-4.10.1.0/Data-Int.html#t:Int">Int</a> -&gt; <a href="Network-WebSockets.html#t:ServerApp">ServerApp</a> -&gt; <a href="../base-4.10.1.0/System-IO.html#t:IO">IO</a> ()</li><li class="src short"><a href="#v:runServerWith">runServerWith</a> :: <a href="../base-4.10.1.0/Data-String.html#t:String">String</a> -&gt; <a href="../base-4.10.1.0/Data-Int.html#t:Int">Int</a> -&gt; <a href="Network-WebSockets.html#t:ConnectionOptions">ConnectionOptions</a> -&gt; <a href="Network-WebSockets.html#t:ServerApp">ServerApp</a> -&gt; <a href="../base-4.10.1.0/System-IO.html#t:IO">IO</a> ()</li><li class="src short"><a href="#v:makeListenSocket">makeListenSocket</a> :: <a href="../base-4.10.1.0/Data-String.html#t:String">String</a> -&gt; <a href="../base-4.10.1.0/Data-Int.html#t:Int">Int</a> -&gt; <a href="../base-4.10.1.0/System-IO.html#t:IO">IO</a> <a href="../network-2.6.3.3/Network-Socket.html#t:Socket">Socket</a></li><li class="src short"><a href="#v:makePendingConnection">makePendingConnection</a> :: <a href="../network-2.6.3.3/Network-Socket.html#t:Socket">Socket</a> -&gt; <a href="Network-WebSockets.html#t:ConnectionOptions">ConnectionOptions</a> -&gt; <a href="../base-4.10.1.0/System-IO.html#t:IO">IO</a> <a href="Network-WebSockets.html#t:PendingConnection">PendingConnection</a></li><li class="src short"><a href="#v:makePendingConnectionFromStream">makePendingConnectionFromStream</a> :: <a href="Network-WebSockets-Stream.html#t:Stream">Stream</a> -&gt; <a href="Network-WebSockets.html#t:ConnectionOptions">ConnectionOptions</a> -&gt; <a href="../base-4.10.1.0/System-IO.html#t:IO">IO</a> <a href="Network-WebSockets.html#t:PendingConnection">PendingConnection</a></li><li class="src short"><span class="keyword">type</span> <a href="#t:ClientApp">ClientApp</a> a = <a href="Network-WebSockets.html#t:Connection">Connection</a> -&gt; <a href="../base-4.10.1.0/System-IO.html#t:IO">IO</a> a</li><li class="src short"><a href="#v:runClient">runClient</a> :: <a href="../base-4.10.1.0/Data-String.html#t:String">String</a> -&gt; <a href="../base-4.10.1.0/Data-Int.html#t:Int">Int</a> -&gt; <a href="../base-4.10.1.0/Data-String.html#t:String">String</a> -&gt; <a href="Network-WebSockets.html#t:ClientApp">ClientApp</a> a -&gt; <a href="../base-4.10.1.0/System-IO.html#t:IO">IO</a> a</li><li class="src short"><a href="#v:runClientWith">runClientWith</a> :: <a href="../base-4.10.1.0/Data-String.html#t:String">String</a> -&gt; <a href="../base-4.10.1.0/Data-Int.html#t:Int">Int</a> -&gt; <a href="../base-4.10.1.0/Data-String.html#t:String">String</a> -&gt; <a href="Network-WebSockets.html#t:ConnectionOptions">ConnectionOptions</a> -&gt; <a href="Network-WebSockets.html#t:Headers">Headers</a> -&gt; <a href="Network-WebSockets.html#t:ClientApp">ClientApp</a> a -&gt; <a href="../base-4.10.1.0/System-IO.html#t:IO">IO</a> a</li><li class="src short"><a href="#v:runClientWithSocket">runClientWithSocket</a> :: <a href="../network-2.6.3.3/Network-Socket.html#t:Socket">Socket</a> -&gt; <a href="../base-4.10.1.0/Data-String.html#t:String">String</a> -&gt; <a href="../base-4.10.1.0/Data-String.html#t:String">String</a> -&gt; <a href="Network-WebSockets.html#t:ConnectionOptions">ConnectionOptions</a> -&gt; <a href="Network-WebSockets.html#t:Headers">Headers</a> -&gt; <a href="Network-WebSockets.html#t:ClientApp">ClientApp</a> a -&gt; <a href="../base-4.10.1.0/System-IO.html#t:IO">IO</a> a</li><li class="src short"><a href="#v:runClientWithStream">runClientWithStream</a> :: <a href="Network-WebSockets-Stream.html#t:Stream">Stream</a> -&gt; <a href="../base-4.10.1.0/Data-String.html#t:String">String</a> -&gt; <a href="../base-4.10.1.0/Data-String.html#t:String">String</a> -&gt; <a href="Network-WebSockets.html#t:ConnectionOptions">ConnectionOptions</a> -&gt; <a href="Network-WebSockets.html#t:Headers">Headers</a> -&gt; <a href="Network-WebSockets.html#t:ClientApp">ClientApp</a> a -&gt; <a href="../base-4.10.1.0/System-IO.html#t:IO">IO</a> a</li><li class="src short"><a href="#v:forkPingThread">forkPingThread</a> :: <a href="Network-WebSockets.html#t:Connection">Connection</a> -&gt; <a href="../base-4.10.1.0/Data-Int.html#t:Int">Int</a> -&gt; <a href="../base-4.10.1.0/System-IO.html#t:IO">IO</a> ()</li></ul></div><div id="interface"><h1 id="g:1">Incoming connections and handshaking</h1><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:PendingConnection" class="def">PendingConnection</a> <a href="src/Network.WebSockets.Connection.html#PendingConnection" class="link">Source</a> <a href="#t:PendingConnection" class="selflink">#</a></p><div class="doc"><p>A new client connected to the server. We haven't accepted the connection
 yet, though.</p></div></div><div class="top"><p class="src"><a id="v:pendingRequest" class="def">pendingRequest</a> :: <a href="Network-WebSockets.html#t:PendingConnection">PendingConnection</a> -&gt; <a href="Network-WebSockets.html#t:RequestHead">RequestHead</a> <a href="src/Network.WebSockets.Connection.html#pendingRequest" class="link">Source</a> <a href="#v:pendingRequest" class="selflink">#</a></p><div class="doc"><p>Useful for e.g. inspecting the request path.</p></div></div><div class="top"><p class="src"><a id="v:acceptRequest" class="def">acceptRequest</a> :: <a href="Network-WebSockets.html#t:PendingConnection">PendingConnection</a> -&gt; <a href="../base-4.10.1.0/System-IO.html#t:IO">IO</a> <a href="Network-WebSockets.html#t:Connection">Connection</a> <a href="src/Network.WebSockets.Connection.html#acceptRequest" class="link">Source</a> <a href="#v:acceptRequest" class="selflink">#</a></p><div class="doc"><p>Accept a pending connection, turning it into a <code><a href="Network-WebSockets.html#t:Connection">Connection</a></code>.</p></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:AcceptRequest" class="def">AcceptRequest</a> <a href="src/Network.WebSockets.Connection.html#AcceptRequest" class="link">Source</a> <a href="#t:AcceptRequest" class="selflink">#</a></p><div class="doc"><p>This datatype allows you to set options for <code><a href="Network-WebSockets.html#v:acceptRequestWith">acceptRequestWith</a></code>.  It is
 strongly recommended to use <code><a href="Network-WebSockets.html#v:defaultAcceptRequest">defaultAcceptRequest</a></code> and then modify the
 various fields, that way new fields introduced in the library do not break
 your code.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:AcceptRequest" class="def">AcceptRequest</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:acceptSubprotocol" class="def">acceptSubprotocol</a> :: !(<a href="../base-4.10.1.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="../bytestring-0.10.8.2/Data-ByteString.html#t:ByteString">ByteString</a>)</dfn><div class="doc"><p>The subprotocol to speak with the client.  If <code>pendingSubprotcols</code> is
 non-empty, <code><a href="Network-WebSockets.html#v:acceptSubprotocol">acceptSubprotocol</a></code> must be one of the subprotocols from the
 list.</p></div></li><li><dfn class="src"><a id="v:acceptHeaders" class="def">acceptHeaders</a> :: !<a href="Network-WebSockets.html#t:Headers">Headers</a></dfn><div class="doc"><p>Extra headers to send with the response.</p></div></li></ul></div></td></tr></table></div></div><div class="top"><p class="src"><a id="v:defaultAcceptRequest" class="def">defaultAcceptRequest</a> :: <a href="Network-WebSockets.html#t:AcceptRequest">AcceptRequest</a> <a href="src/Network.WebSockets.Connection.html#defaultAcceptRequest" class="link">Source</a> <a href="#v:defaultAcceptRequest" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:acceptRequestWith" class="def">acceptRequestWith</a> :: <a href="Network-WebSockets.html#t:PendingConnection">PendingConnection</a> -&gt; <a href="Network-WebSockets.html#t:AcceptRequest">AcceptRequest</a> -&gt; <a href="../base-4.10.1.0/System-IO.html#t:IO">IO</a> <a href="Network-WebSockets.html#t:Connection">Connection</a> <a href="src/Network.WebSockets.Connection.html#acceptRequestWith" class="link">Source</a> <a href="#v:acceptRequestWith" class="selflink">#</a></p><div class="doc"><p>This function is like <code><a href="Network-WebSockets.html#v:acceptRequest">acceptRequest</a></code> but allows you to set custom options
 using the <code><a href="Network-WebSockets.html#t:AcceptRequest">AcceptRequest</a></code> datatype.</p></div></div><div class="top"><p class="src"><a id="v:rejectRequest" class="def">rejectRequest</a> <a href="src/Network.WebSockets.Connection.html#rejectRequest" class="link">Source</a> <a href="#v:rejectRequest" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="Network-WebSockets.html#t:PendingConnection">PendingConnection</a></td><td class="doc"><p>Connection to reject</p></td></tr><tr><td class="src">-&gt; <a href="../bytestring-0.10.8.2/Data-ByteString.html#t:ByteString">ByteString</a></td><td class="doc"><p>Rejection response body</p></td></tr><tr><td class="src">-&gt; <a href="../base-4.10.1.0/System-IO.html#t:IO">IO</a> ()</td><td class="doc empty">&nbsp;</td></tr></table></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:RejectRequest" class="def">RejectRequest</a> <a href="src/Network.WebSockets.Connection.html#RejectRequest" class="link">Source</a> <a href="#t:RejectRequest" class="selflink">#</a></p><div class="doc"><p>Parameters that allow you to tweak how a request is rejected.  Please use
 <code><a href="Network-WebSockets.html#v:defaultRejectRequest">defaultRejectRequest</a></code> and modify fields using record syntax so your code
 will not break when new fields are added.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:RejectRequest" class="def">RejectRequest</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:rejectCode" class="def">rejectCode</a> :: !<a href="../base-4.10.1.0/Data-Int.html#t:Int">Int</a></dfn><div class="doc"><p>The status code, 400 by default.</p></div></li><li><dfn class="src"><a id="v:rejectMessage" class="def">rejectMessage</a> :: !<a href="../bytestring-0.10.8.2/Data-ByteString.html#t:ByteString">ByteString</a></dfn><div class="doc"><p>The message, &quot;Bad Request&quot; by default</p></div></li><li><dfn class="src"><a id="v:rejectHeaders" class="def">rejectHeaders</a> :: <a href="Network-WebSockets.html#t:Headers">Headers</a></dfn><div class="doc"><p>Extra headers to be sent with the response.</p></div></li><li><dfn class="src"><a id="v:rejectBody" class="def">rejectBody</a> :: !<a href="../bytestring-0.10.8.2/Data-ByteString.html#t:ByteString">ByteString</a></dfn><div class="doc"><p>Reponse body of the rejection.</p></div></li></ul></div></td></tr></table></div></div><div class="top"><p class="src"><a id="v:defaultRejectRequest" class="def">defaultRejectRequest</a> :: <a href="Network-WebSockets.html#t:RejectRequest">RejectRequest</a> <a href="src/Network.WebSockets.Connection.html#defaultRejectRequest" class="link">Source</a> <a href="#v:defaultRejectRequest" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:rejectRequestWith" class="def">rejectRequestWith</a> <a href="src/Network.WebSockets.Connection.html#rejectRequestWith" class="link">Source</a> <a href="#v:rejectRequestWith" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="Network-WebSockets.html#t:PendingConnection">PendingConnection</a></td><td class="doc"><p>Connection to reject</p></td></tr><tr><td class="src">-&gt; <a href="Network-WebSockets.html#t:RejectRequest">RejectRequest</a></td><td class="doc"><p>Params on how to reject the request</p></td></tr><tr><td class="src">-&gt; <a href="../base-4.10.1.0/System-IO.html#t:IO">IO</a> ()</td><td class="doc empty">&nbsp;</td></tr></table></div></div><h1 id="g:2">Main connection type</h1><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:Connection" class="def">Connection</a> <a href="src/Network.WebSockets.Connection.html#Connection" class="link">Source</a> <a href="#t:Connection" class="selflink">#</a></p></div><h1 id="g:3">Options for connections</h1><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:ConnectionOptions" class="def">ConnectionOptions</a> <a href="src/Network.WebSockets.Connection.Options.html#ConnectionOptions" class="link">Source</a> <a href="#t:ConnectionOptions" class="selflink">#</a></p><div class="doc"><p>Set options for a <code>Connection</code>.  Please do not use this constructor
 directly, but rather use <code><a href="Network-WebSockets.html#v:defaultConnectionOptions">defaultConnectionOptions</a></code> and then set the fields
 you want, e.g.:</p><pre>myOptions = defaultConnectionOptions {connectionStrictUnicode = True}</pre><p>This way your code does not break if the library introduces new fields.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:ConnectionOptions" class="def">ConnectionOptions</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:connectionOnPong" class="def">connectionOnPong</a> :: !(<a href="../base-4.10.1.0/System-IO.html#t:IO">IO</a> ())</dfn><div class="doc"><p>Whenever a <code>pong</code> is received, this IO action is executed. It can be
 used to tickle connections or fire missiles.</p></div></li><li><dfn class="src"><a id="v:connectionCompressionOptions" class="def">connectionCompressionOptions</a> :: !<a href="Network-WebSockets.html#t:CompressionOptions">CompressionOptions</a></dfn><div class="doc"><p>Enable <code><a href="Network-WebSockets.html#t:PermessageDeflate">PermessageDeflate</a></code>.</p></div></li><li><dfn class="src"><a id="v:connectionStrictUnicode" class="def">connectionStrictUnicode</a> :: !<a href="../base-4.10.1.0/Data-Bool.html#t:Bool">Bool</a></dfn><div class="doc"><p>Enable strict unicode on the connection.  This means that if a client
 (or server) sends invalid UTF-8, we will throw a <code>UnicodeException</code>
 rather than replacing it by the unicode replacement character U+FFFD.</p></div></li><li><dfn class="src"><a id="v:connectionFramePayloadSizeLimit" class="def">connectionFramePayloadSizeLimit</a> :: !<a href="Network-WebSockets.html#t:SizeLimit">SizeLimit</a></dfn><div class="doc"><p>The maximum size for incoming frame payload size in bytes.  If a
 frame exceeds this limit, a <code>ParseException</code> is thrown.</p></div></li><li><dfn class="src"><a id="v:connectionMessageDataSizeLimit" class="def">connectionMessageDataSizeLimit</a> :: !<a href="Network-WebSockets.html#t:SizeLimit">SizeLimit</a></dfn><div class="doc"><p><code>connectionFrameSizeLimit</code> is often not enough since a malicious
 client can send many small frames to create a huge message.  This limit
 allows you to protect from that.  If a message exceeds this limit, a
 <code>ParseException</code> is thrown.</p><p>Note that, if compression is enabled, we check the size of the
 compressed messages, as well as the size of the uncompressed messages
 as we are deflating them to ensure we don't use too much memory in any
 case.</p></div></li></ul></div></td></tr></table></div></div><div class="top"><p class="src"><a id="v:defaultConnectionOptions" class="def">defaultConnectionOptions</a> :: <a href="Network-WebSockets.html#t:ConnectionOptions">ConnectionOptions</a> <a href="src/Network.WebSockets.Connection.Options.html#defaultConnectionOptions" class="link">Source</a> <a href="#v:defaultConnectionOptions" class="selflink">#</a></p><div class="doc"><p>The default connection options:</p><ul><li>Nothing happens when a pong is received.</li><li>Compression is disabled.</li><li>Lenient unicode decoding.</li></ul></div></div><h2 id="g:4">Compression options</h2><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:CompressionOptions" class="def">CompressionOptions</a> <a href="src/Network.WebSockets.Connection.Options.html#CompressionOptions" class="link">Source</a> <a href="#t:CompressionOptions" class="selflink">#</a></p><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:NoCompression" class="def">NoCompression</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a id="v:PermessageDeflateCompression" class="def">PermessageDeflateCompression</a> <a href="Network-WebSockets.html#t:PermessageDeflate">PermessageDeflate</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="subs instances"><p id="control.i:CompressionOptions" class="caption collapser" onclick="toggleSection('i:CompressionOptions')">Instances</p><div id="section.i:CompressionOptions" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:CompressionOptions:Eq:1" class="instance expander" onclick="toggleSection('i:id:CompressionOptions:Eq:1')"></span> <a href="../base-4.10.1.0/Data-Eq.html#t:Eq">Eq</a> <a href="Network-WebSockets.html#t:CompressionOptions">CompressionOptions</a></span> <a href="src/Network.WebSockets.Connection.Options.html#line-75" class="link">Source</a> <a href="#t:CompressionOptions" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:CompressionOptions:Eq:1" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-61--61-">(==)</a> :: <a href="Network-WebSockets.html#t:CompressionOptions">CompressionOptions</a> -&gt; <a href="Network-WebSockets.html#t:CompressionOptions">CompressionOptions</a> -&gt; <a href="../base-4.10.1.0/Data-Bool.html#t:Bool">Bool</a> <a href="#v:-61--61-" class="selflink">#</a></p><p class="src"><a href="#v:-47--61-">(/=)</a> :: <a href="Network-WebSockets.html#t:CompressionOptions">CompressionOptions</a> -&gt; <a href="Network-WebSockets.html#t:CompressionOptions">CompressionOptions</a> -&gt; <a href="../base-4.10.1.0/Data-Bool.html#t:Bool">Bool</a> <a href="#v:-47--61-" class="selflink">#</a></p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:CompressionOptions:Show:2" class="instance expander" onclick="toggleSection('i:id:CompressionOptions:Show:2')"></span> <a href="../base-4.10.1.0/Text-Show.html#t:Show">Show</a> <a href="Network-WebSockets.html#t:CompressionOptions">CompressionOptions</a></span> <a href="src/Network.WebSockets.Connection.Options.html#line-75" class="link">Source</a> <a href="#t:CompressionOptions" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:CompressionOptions:Show:2" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: <a href="../base-4.10.1.0/Data-Int.html#t:Int">Int</a> -&gt; <a href="Network-WebSockets.html#t:CompressionOptions">CompressionOptions</a> -&gt; <a href="../base-4.10.1.0/Text-Show.html#t:ShowS">ShowS</a> <a href="#v:showsPrec" class="selflink">#</a></p><p class="src"><a href="#v:show">show</a> :: <a href="Network-WebSockets.html#t:CompressionOptions">CompressionOptions</a> -&gt; <a href="../base-4.10.1.0/Data-String.html#t:String">String</a> <a href="#v:show" class="selflink">#</a></p><p class="src"><a href="#v:showList">showList</a> :: [<a href="Network-WebSockets.html#t:CompressionOptions">CompressionOptions</a>] -&gt; <a href="../base-4.10.1.0/Text-Show.html#t:ShowS">ShowS</a> <a href="#v:showList" class="selflink">#</a></p></div></div></td></tr></table></div></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:PermessageDeflate" class="def">PermessageDeflate</a> <a href="src/Network.WebSockets.Connection.Options.html#PermessageDeflate" class="link">Source</a> <a href="#t:PermessageDeflate" class="selflink">#</a></p><div class="doc"><p>Four extension parameters are defined for &quot;permessage-deflate&quot; to
 help endpoints manage per-connection resource usage.</p><ul><li>&quot;server_no_context_takeover&quot;</li><li>&quot;client_no_context_takeover&quot;</li><li>&quot;server_max_window_bits&quot;</li><li>&quot;client_max_window_bits&quot;</li></ul></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:PermessageDeflate" class="def">PermessageDeflate</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:serverNoContextTakeover" class="def">serverNoContextTakeover</a> :: <a href="../base-4.10.1.0/Data-Bool.html#t:Bool">Bool</a></dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:clientNoContextTakeover" class="def">clientNoContextTakeover</a> :: <a href="../base-4.10.1.0/Data-Bool.html#t:Bool">Bool</a></dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:serverMaxWindowBits" class="def">serverMaxWindowBits</a> :: <a href="../base-4.10.1.0/Data-Int.html#t:Int">Int</a></dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:clientMaxWindowBits" class="def">clientMaxWindowBits</a> :: <a href="../base-4.10.1.0/Data-Int.html#t:Int">Int</a></dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:pdCompressionLevel" class="def">pdCompressionLevel</a> :: <a href="../base-4.10.1.0/Data-Int.html#t:Int">Int</a></dfn><div class="doc empty">&nbsp;</div></li></ul></div></td></tr></table></div><div class="subs instances"><p id="control.i:PermessageDeflate" class="caption collapser" onclick="toggleSection('i:PermessageDeflate')">Instances</p><div id="section.i:PermessageDeflate" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:PermessageDeflate:Eq:1" class="instance expander" onclick="toggleSection('i:id:PermessageDeflate:Eq:1')"></span> <a href="../base-4.10.1.0/Data-Eq.html#t:Eq">Eq</a> <a href="Network-WebSockets.html#t:PermessageDeflate">PermessageDeflate</a></span> <a href="src/Network.WebSockets.Connection.Options.html#line-92" class="link">Source</a> <a href="#t:PermessageDeflate" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:PermessageDeflate:Eq:1" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-61--61-">(==)</a> :: <a href="Network-WebSockets.html#t:PermessageDeflate">PermessageDeflate</a> -&gt; <a href="Network-WebSockets.html#t:PermessageDeflate">PermessageDeflate</a> -&gt; <a href="../base-4.10.1.0/Data-Bool.html#t:Bool">Bool</a> <a href="#v:-61--61-" class="selflink">#</a></p><p class="src"><a href="#v:-47--61-">(/=)</a> :: <a href="Network-WebSockets.html#t:PermessageDeflate">PermessageDeflate</a> -&gt; <a href="Network-WebSockets.html#t:PermessageDeflate">PermessageDeflate</a> -&gt; <a href="../base-4.10.1.0/Data-Bool.html#t:Bool">Bool</a> <a href="#v:-47--61-" class="selflink">#</a></p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:PermessageDeflate:Show:2" class="instance expander" onclick="toggleSection('i:id:PermessageDeflate:Show:2')"></span> <a href="../base-4.10.1.0/Text-Show.html#t:Show">Show</a> <a href="Network-WebSockets.html#t:PermessageDeflate">PermessageDeflate</a></span> <a href="src/Network.WebSockets.Connection.Options.html#line-92" class="link">Source</a> <a href="#t:PermessageDeflate" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:PermessageDeflate:Show:2" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: <a href="../base-4.10.1.0/Data-Int.html#t:Int">Int</a> -&gt; <a href="Network-WebSockets.html#t:PermessageDeflate">PermessageDeflate</a> -&gt; <a href="../base-4.10.1.0/Text-Show.html#t:ShowS">ShowS</a> <a href="#v:showsPrec" class="selflink">#</a></p><p class="src"><a href="#v:show">show</a> :: <a href="Network-WebSockets.html#t:PermessageDeflate">PermessageDeflate</a> -&gt; <a href="../base-4.10.1.0/Data-String.html#t:String">String</a> <a href="#v:show" class="selflink">#</a></p><p class="src"><a href="#v:showList">showList</a> :: [<a href="Network-WebSockets.html#t:PermessageDeflate">PermessageDeflate</a>] -&gt; <a href="../base-4.10.1.0/Text-Show.html#t:ShowS">ShowS</a> <a href="#v:showList" class="selflink">#</a></p></div></div></td></tr></table></div></div></div><div class="top"><p class="src"><a id="v:defaultPermessageDeflate" class="def">defaultPermessageDeflate</a> :: <a href="Network-WebSockets.html#t:PermessageDeflate">PermessageDeflate</a> <a href="src/Network.WebSockets.Connection.Options.html#defaultPermessageDeflate" class="link">Source</a> <a href="#v:defaultPermessageDeflate" class="selflink">#</a></p></div><h2 id="g:5">Protection limits</h2><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:SizeLimit" class="def">SizeLimit</a> <a href="src/Network.WebSockets.Connection.Options.html#SizeLimit" class="link">Source</a> <a href="#t:SizeLimit" class="selflink">#</a></p><div class="doc"><p>A size limit, in bytes.  The <code><a href="../base-4.10.1.0/Data-Monoid.html#t:Monoid">Monoid</a></code> instance takes the minimum limit.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:NoSizeLimit" class="def">NoSizeLimit</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a id="v:SizeLimit" class="def">SizeLimit</a> !<a href="../base-4.10.1.0/Data-Int.html#t:Int64">Int64</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="subs instances"><p id="control.i:SizeLimit" class="caption collapser" onclick="toggleSection('i:SizeLimit')">Instances</p><div id="section.i:SizeLimit" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:SizeLimit:Eq:1" class="instance expander" onclick="toggleSection('i:id:SizeLimit:Eq:1')"></span> <a href="../base-4.10.1.0/Data-Eq.html#t:Eq">Eq</a> <a href="Network-WebSockets.html#t:SizeLimit">SizeLimit</a></span> <a href="src/Network.WebSockets.Connection.Options.html#line-105" class="link">Source</a> <a href="#t:SizeLimit" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:SizeLimit:Eq:1" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-61--61-">(==)</a> :: <a href="Network-WebSockets.html#t:SizeLimit">SizeLimit</a> -&gt; <a href="Network-WebSockets.html#t:SizeLimit">SizeLimit</a> -&gt; <a href="../base-4.10.1.0/Data-Bool.html#t:Bool">Bool</a> <a href="#v:-61--61-" class="selflink">#</a></p><p class="src"><a href="#v:-47--61-">(/=)</a> :: <a href="Network-WebSockets.html#t:SizeLimit">SizeLimit</a> -&gt; <a href="Network-WebSockets.html#t:SizeLimit">SizeLimit</a> -&gt; <a href="../base-4.10.1.0/Data-Bool.html#t:Bool">Bool</a> <a href="#v:-47--61-" class="selflink">#</a></p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:SizeLimit:Show:2" class="instance expander" onclick="toggleSection('i:id:SizeLimit:Show:2')"></span> <a href="../base-4.10.1.0/Text-Show.html#t:Show">Show</a> <a href="Network-WebSockets.html#t:SizeLimit">SizeLimit</a></span> <a href="src/Network.WebSockets.Connection.Options.html#line-105" class="link">Source</a> <a href="#t:SizeLimit" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:SizeLimit:Show:2" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: <a href="../base-4.10.1.0/Data-Int.html#t:Int">Int</a> -&gt; <a href="Network-WebSockets.html#t:SizeLimit">SizeLimit</a> -&gt; <a href="../base-4.10.1.0/Text-Show.html#t:ShowS">ShowS</a> <a href="#v:showsPrec" class="selflink">#</a></p><p class="src"><a href="#v:show">show</a> :: <a href="Network-WebSockets.html#t:SizeLimit">SizeLimit</a> -&gt; <a href="../base-4.10.1.0/Data-String.html#t:String">String</a> <a href="#v:show" class="selflink">#</a></p><p class="src"><a href="#v:showList">showList</a> :: [<a href="Network-WebSockets.html#t:SizeLimit">SizeLimit</a>] -&gt; <a href="../base-4.10.1.0/Text-Show.html#t:ShowS">ShowS</a> <a href="#v:showList" class="selflink">#</a></p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:SizeLimit:Monoid:3" class="instance expander" onclick="toggleSection('i:id:SizeLimit:Monoid:3')"></span> <a href="../base-4.10.1.0/Data-Monoid.html#t:Monoid">Monoid</a> <a href="Network-WebSockets.html#t:SizeLimit">SizeLimit</a></span> <a href="src/Network.WebSockets.Connection.Options.html#line-109" class="link">Source</a> <a href="#t:SizeLimit" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:SizeLimit:Monoid:3" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:mempty">mempty</a> :: <a href="Network-WebSockets.html#t:SizeLimit">SizeLimit</a> <a href="#v:mempty" class="selflink">#</a></p><p class="src"><a href="#v:mappend">mappend</a> :: <a href="Network-WebSockets.html#t:SizeLimit">SizeLimit</a> -&gt; <a href="Network-WebSockets.html#t:SizeLimit">SizeLimit</a> -&gt; <a href="Network-WebSockets.html#t:SizeLimit">SizeLimit</a> <a href="#v:mappend" class="selflink">#</a></p><p class="src"><a href="#v:mconcat">mconcat</a> :: [<a href="Network-WebSockets.html#t:SizeLimit">SizeLimit</a>] -&gt; <a href="Network-WebSockets.html#t:SizeLimit">SizeLimit</a> <a href="#v:mconcat" class="selflink">#</a></p></div></div></td></tr></table></div></div></div><h1 id="g:6">Sending and receiving messages</h1><div class="top"><p class="src"><a id="v:receive" class="def">receive</a> :: <a href="Network-WebSockets.html#t:Connection">Connection</a> -&gt; <a href="../base-4.10.1.0/System-IO.html#t:IO">IO</a> <a href="Network-WebSockets.html#t:Message">Message</a> <a href="src/Network.WebSockets.Connection.html#receive" class="link">Source</a> <a href="#v:receive" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:receiveDataMessage" class="def">receiveDataMessage</a> :: <a href="Network-WebSockets.html#t:Connection">Connection</a> -&gt; <a href="../base-4.10.1.0/System-IO.html#t:IO">IO</a> <a href="Network-WebSockets.html#t:DataMessage">DataMessage</a> <a href="src/Network.WebSockets.Connection.html#receiveDataMessage" class="link">Source</a> <a href="#v:receiveDataMessage" class="selflink">#</a></p><div class="doc"><p>Receive an application message. Automatically respond to control messages.</p><p>When the peer sends a close control message, an exception of type <code><a href="Network-WebSockets.html#v:CloseRequest">CloseRequest</a></code>
 is thrown.  The peer can send a close control message either to initiate a
 close or in response to a close message we have sent to the peer.  In either
 case the <code><a href="Network-WebSockets.html#v:CloseRequest">CloseRequest</a></code> exception will be thrown.  The RFC specifies that
 the server is responsible for closing the TCP connection, which should happen
 after receiving the <code><a href="Network-WebSockets.html#v:CloseRequest">CloseRequest</a></code> exception from this function.</p><p>This will throw <code><a href="Network-WebSockets.html#v:ConnectionClosed">ConnectionClosed</a></code> if the TCP connection dies unexpectedly.</p></div></div><div class="top"><p class="src"><a id="v:receiveData" class="def">receiveData</a> :: <a href="Network-WebSockets.html#t:WebSocketsData">WebSocketsData</a> a =&gt; <a href="Network-WebSockets.html#t:Connection">Connection</a> -&gt; <a href="../base-4.10.1.0/System-IO.html#t:IO">IO</a> a <a href="src/Network.WebSockets.Connection.html#receiveData" class="link">Source</a> <a href="#v:receiveData" class="selflink">#</a></p><div class="doc"><p>Receive a message, converting it to whatever format is needed.</p></div></div><div class="top"><p class="src"><a id="v:send" class="def">send</a> :: <a href="Network-WebSockets.html#t:Connection">Connection</a> -&gt; <a href="Network-WebSockets.html#t:Message">Message</a> -&gt; <a href="../base-4.10.1.0/System-IO.html#t:IO">IO</a> () <a href="src/Network.WebSockets.Connection.html#send" class="link">Source</a> <a href="#v:send" class="selflink">#</a></p></div><div class="top"><p class="src"><a id="v:sendDataMessage" class="def">sendDataMessage</a> :: <a href="Network-WebSockets.html#t:Connection">Connection</a> -&gt; <a href="Network-WebSockets.html#t:DataMessage">DataMessage</a> -&gt; <a href="../base-4.10.1.0/System-IO.html#t:IO">IO</a> () <a href="src/Network.WebSockets.Connection.html#sendDataMessage" class="link">Source</a> <a href="#v:sendDataMessage" class="selflink">#</a></p><div class="doc"><p>Send a <code><a href="Network-WebSockets.html#t:DataMessage">DataMessage</a></code>.  This allows you send both human-readable text and
 binary data.  This is a slightly more low-level interface than <code><a href="Network-WebSockets.html#v:sendTextData">sendTextData</a></code>
 or <code><a href="Network-WebSockets.html#v:sendBinaryData">sendBinaryData</a></code>.</p></div></div><div class="top"><p class="src"><a id="v:sendTextData" class="def">sendTextData</a> :: <a href="Network-WebSockets.html#t:WebSocketsData">WebSocketsData</a> a =&gt; <a href="Network-WebSockets.html#t:Connection">Connection</a> -&gt; a -&gt; <a href="../base-4.10.1.0/System-IO.html#t:IO">IO</a> () <a href="src/Network.WebSockets.Connection.html#sendTextData" class="link">Source</a> <a href="#v:sendTextData" class="selflink">#</a></p><div class="doc"><p>Send a textual message.  The message will be encoded as UTF-8.  This should
 be the default choice for human-readable text-based protocols such as JSON.</p></div></div><div class="top"><p class="src"><a id="v:sendTextDatas" class="def">sendTextDatas</a> :: <a href="Network-WebSockets.html#t:WebSocketsData">WebSocketsData</a> a =&gt; <a href="Network-WebSockets.html#t:Connection">Connection</a> -&gt; [a] -&gt; <a href="../base-4.10.1.0/System-IO.html#t:IO">IO</a> () <a href="src/Network.WebSockets.Connection.html#sendTextDatas" class="link">Source</a> <a href="#v:sendTextDatas" class="selflink">#</a></p><div class="doc"><p>Send a number of textual messages.  This is more efficient than calling
 <code><a href="Network-WebSockets.html#v:sendTextData">sendTextData</a></code> many times.</p></div></div><div class="top"><p class="src"><a id="v:sendBinaryData" class="def">sendBinaryData</a> :: <a href="Network-WebSockets.html#t:WebSocketsData">WebSocketsData</a> a =&gt; <a href="Network-WebSockets.html#t:Connection">Connection</a> -&gt; a -&gt; <a href="../base-4.10.1.0/System-IO.html#t:IO">IO</a> () <a href="src/Network.WebSockets.Connection.html#sendBinaryData" class="link">Source</a> <a href="#v:sendBinaryData" class="selflink">#</a></p><div class="doc"><p>Send a binary message.  This is useful for sending binary blobs, e.g.
 images, data encoded with MessagePack, images...</p></div></div><div class="top"><p class="src"><a id="v:sendClose" class="def">sendClose</a> :: <a href="Network-WebSockets.html#t:WebSocketsData">WebSocketsData</a> a =&gt; <a href="Network-WebSockets.html#t:Connection">Connection</a> -&gt; a -&gt; <a href="../base-4.10.1.0/System-IO.html#t:IO">IO</a> () <a href="src/Network.WebSockets.Connection.html#sendClose" class="link">Source</a> <a href="#v:sendClose" class="selflink">#</a></p><div class="doc"><p>Send a friendly close message.  Note that after sending this message,
 you should still continue calling <code><a href="Network-WebSockets.html#v:receiveDataMessage">receiveDataMessage</a></code> to process any
 in-flight messages.  The peer will eventually respond with a close control
 message of its own which will cause <code><a href="Network-WebSockets.html#v:receiveDataMessage">receiveDataMessage</a></code> to throw the
 <code><a href="Network-WebSockets.html#v:CloseRequest">CloseRequest</a></code> exception.  This exception is when you can finally consider
 the connection closed.</p></div></div><div class="top"><p class="src"><a id="v:sendPing" class="def">sendPing</a> :: <a href="Network-WebSockets.html#t:WebSocketsData">WebSocketsData</a> a =&gt; <a href="Network-WebSockets.html#t:Connection">Connection</a> -&gt; a -&gt; <a href="../base-4.10.1.0/System-IO.html#t:IO">IO</a> () <a href="src/Network.WebSockets.Connection.html#sendPing" class="link">Source</a> <a href="#v:sendPing" class="selflink">#</a></p><div class="doc"><p>Send a ping</p></div></div><h1 id="g:7">HTTP Types</h1><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:Headers" class="def">Headers</a> = [(<a href="../case-insensitive-1.2.0.10/Data-CaseInsensitive.html#t:CI">CI</a> <a href="../bytestring-0.10.8.2/Data-ByteString.html#t:ByteString">ByteString</a>, <a href="../bytestring-0.10.8.2/Data-ByteString.html#t:ByteString">ByteString</a>)] <a href="src/Network.WebSockets.Http.html#Headers" class="link">Source</a> <a href="#t:Headers" class="selflink">#</a></p><div class="doc"><p>Request headers</p></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:Request" class="def">Request</a> <a href="src/Network.WebSockets.Http.html#Request" class="link">Source</a> <a href="#t:Request" class="selflink">#</a></p><div class="doc"><p>A request with a body</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:Request" class="def">Request</a> <a href="Network-WebSockets.html#t:RequestHead">RequestHead</a> <a href="../bytestring-0.10.8.2/Data-ByteString.html#t:ByteString">ByteString</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="subs instances"><p id="control.i:Request" class="caption collapser" onclick="toggleSection('i:Request')">Instances</p><div id="section.i:Request" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:Request:Show:1" class="instance expander" onclick="toggleSection('i:id:Request:Show:1')"></span> <a href="../base-4.10.1.0/Text-Show.html#t:Show">Show</a> <a href="Network-WebSockets.html#t:Request">Request</a></span> <a href="src/Network.WebSockets.Http.html#line-68" class="link">Source</a> <a href="#t:Request" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:Request:Show:1" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: <a href="../base-4.10.1.0/Data-Int.html#t:Int">Int</a> -&gt; <a href="Network-WebSockets.html#t:Request">Request</a> -&gt; <a href="../base-4.10.1.0/Text-Show.html#t:ShowS">ShowS</a> <a href="#v:showsPrec" class="selflink">#</a></p><p class="src"><a href="#v:show">show</a> :: <a href="Network-WebSockets.html#t:Request">Request</a> -&gt; <a href="../base-4.10.1.0/Data-String.html#t:String">String</a> <a href="#v:show" class="selflink">#</a></p><p class="src"><a href="#v:showList">showList</a> :: [<a href="Network-WebSockets.html#t:Request">Request</a>] -&gt; <a href="../base-4.10.1.0/Text-Show.html#t:ShowS">ShowS</a> <a href="#v:showList" class="selflink">#</a></p></div></div></td></tr></table></div></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:RequestHead" class="def">RequestHead</a> <a href="src/Network.WebSockets.Http.html#RequestHead" class="link">Source</a> <a href="#t:RequestHead" class="selflink">#</a></p><div class="doc"><p>An HTTP request. The request body is not yet read.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:RequestHead" class="def">RequestHead</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:requestPath" class="def">requestPath</a> :: !<a href="../bytestring-0.10.8.2/Data-ByteString.html#t:ByteString">ByteString</a></dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:requestHeaders" class="def">requestHeaders</a> :: <a href="Network-WebSockets.html#t:Headers">Headers</a></dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:requestSecure" class="def">requestSecure</a> :: <a href="../base-4.10.1.0/Data-Bool.html#t:Bool">Bool</a></dfn><div class="doc empty">&nbsp;</div></li></ul></div></td></tr></table></div><div class="subs instances"><p id="control.i:RequestHead" class="caption collapser" onclick="toggleSection('i:RequestHead')">Instances</p><div id="section.i:RequestHead" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:RequestHead:Show:1" class="instance expander" onclick="toggleSection('i:id:RequestHead:Show:1')"></span> <a href="../base-4.10.1.0/Text-Show.html#t:Show">Show</a> <a href="Network-WebSockets.html#t:RequestHead">RequestHead</a></span> <a href="src/Network.WebSockets.Http.html#line-62" class="link">Source</a> <a href="#t:RequestHead" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:RequestHead:Show:1" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: <a href="../base-4.10.1.0/Data-Int.html#t:Int">Int</a> -&gt; <a href="Network-WebSockets.html#t:RequestHead">RequestHead</a> -&gt; <a href="../base-4.10.1.0/Text-Show.html#t:ShowS">ShowS</a> <a href="#v:showsPrec" class="selflink">#</a></p><p class="src"><a href="#v:show">show</a> :: <a href="Network-WebSockets.html#t:RequestHead">RequestHead</a> -&gt; <a href="../base-4.10.1.0/Data-String.html#t:String">String</a> <a href="#v:show" class="selflink">#</a></p><p class="src"><a href="#v:showList">showList</a> :: [<a href="Network-WebSockets.html#t:RequestHead">RequestHead</a>] -&gt; <a href="../base-4.10.1.0/Text-Show.html#t:ShowS">ShowS</a> <a href="#v:showList" class="selflink">#</a></p></div></div></td></tr></table></div></div></div><div class="top"><p class="src"><a id="v:getRequestSubprotocols" class="def">getRequestSubprotocols</a> :: <a href="Network-WebSockets.html#t:RequestHead">RequestHead</a> -&gt; [<a href="../bytestring-0.10.8.2/Data-ByteString.html#t:ByteString">ByteString</a>] <a href="src/Network.WebSockets.Http.html#getRequestSubprotocols" class="link">Source</a> <a href="#v:getRequestSubprotocols" class="selflink">#</a></p><div class="doc"><p>List of subprotocols specified by the client, in order of preference.
 If the client did not specify a list of subprotocols, this will be the
 empty list.</p></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:Response" class="def">Response</a> <a href="src/Network.WebSockets.Http.html#Response" class="link">Source</a> <a href="#t:Response" class="selflink">#</a></p><div class="doc"><p>A response including a body</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:Response" class="def">Response</a> <a href="Network-WebSockets.html#t:ResponseHead">ResponseHead</a> <a href="../bytestring-0.10.8.2/Data-ByteString.html#t:ByteString">ByteString</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="subs instances"><p id="control.i:Response" class="caption collapser" onclick="toggleSection('i:Response')">Instances</p><div id="section.i:Response" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:Response:Show:1" class="instance expander" onclick="toggleSection('i:id:Response:Show:1')"></span> <a href="../base-4.10.1.0/Text-Show.html#t:Show">Show</a> <a href="Network-WebSockets.html#t:Response">Response</a></span> <a href="src/Network.WebSockets.Http.html#line-83" class="link">Source</a> <a href="#t:Response" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:Response:Show:1" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: <a href="../base-4.10.1.0/Data-Int.html#t:Int">Int</a> -&gt; <a href="Network-WebSockets.html#t:Response">Response</a> -&gt; <a href="../base-4.10.1.0/Text-Show.html#t:ShowS">ShowS</a> <a href="#v:showsPrec" class="selflink">#</a></p><p class="src"><a href="#v:show">show</a> :: <a href="Network-WebSockets.html#t:Response">Response</a> -&gt; <a href="../base-4.10.1.0/Data-String.html#t:String">String</a> <a href="#v:show" class="selflink">#</a></p><p class="src"><a href="#v:showList">showList</a> :: [<a href="Network-WebSockets.html#t:Response">Response</a>] -&gt; <a href="../base-4.10.1.0/Text-Show.html#t:ShowS">ShowS</a> <a href="#v:showList" class="selflink">#</a></p></div></div></td></tr></table></div></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:ResponseHead" class="def">ResponseHead</a> <a href="src/Network.WebSockets.Http.html#ResponseHead" class="link">Source</a> <a href="#t:ResponseHead" class="selflink">#</a></p><div class="doc"><p>HTTP response, without body.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:ResponseHead" class="def">ResponseHead</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div class="subs fields"><p class="caption">Fields</p><ul><li><dfn class="src"><a id="v:responseCode" class="def">responseCode</a> :: !<a href="../base-4.10.1.0/Data-Int.html#t:Int">Int</a></dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:responseMessage" class="def">responseMessage</a> :: !<a href="../bytestring-0.10.8.2/Data-ByteString.html#t:ByteString">ByteString</a></dfn><div class="doc empty">&nbsp;</div></li><li><dfn class="src"><a id="v:responseHeaders" class="def">responseHeaders</a> :: <a href="Network-WebSockets.html#t:Headers">Headers</a></dfn><div class="doc empty">&nbsp;</div></li></ul></div></td></tr></table></div><div class="subs instances"><p id="control.i:ResponseHead" class="caption collapser" onclick="toggleSection('i:ResponseHead')">Instances</p><div id="section.i:ResponseHead" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:ResponseHead:Show:1" class="instance expander" onclick="toggleSection('i:id:ResponseHead:Show:1')"></span> <a href="../base-4.10.1.0/Text-Show.html#t:Show">Show</a> <a href="Network-WebSockets.html#t:ResponseHead">ResponseHead</a></span> <a href="src/Network.WebSockets.Http.html#line-77" class="link">Source</a> <a href="#t:ResponseHead" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:ResponseHead:Show:1" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: <a href="../base-4.10.1.0/Data-Int.html#t:Int">Int</a> -&gt; <a href="Network-WebSockets.html#t:ResponseHead">ResponseHead</a> -&gt; <a href="../base-4.10.1.0/Text-Show.html#t:ShowS">ShowS</a> <a href="#v:showsPrec" class="selflink">#</a></p><p class="src"><a href="#v:show">show</a> :: <a href="Network-WebSockets.html#t:ResponseHead">ResponseHead</a> -&gt; <a href="../base-4.10.1.0/Data-String.html#t:String">String</a> <a href="#v:show" class="selflink">#</a></p><p class="src"><a href="#v:showList">showList</a> :: [<a href="Network-WebSockets.html#t:ResponseHead">ResponseHead</a>] -&gt; <a href="../base-4.10.1.0/Text-Show.html#t:ShowS">ShowS</a> <a href="#v:showList" class="selflink">#</a></p></div></div></td></tr></table></div></div></div><h1 id="g:8">WebSocket message types</h1><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:Message" class="def">Message</a> <a href="src/Network.WebSockets.Types.html#Message" class="link">Source</a> <a href="#t:Message" class="selflink">#</a></p><div class="doc"><p>The kind of message a server application typically deals with</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:ControlMessage" class="def">ControlMessage</a> <a href="Network-WebSockets.html#t:ControlMessage">ControlMessage</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a id="v:DataMessage" class="def">DataMessage</a> <a href="../base-4.10.1.0/Data-Bool.html#t:Bool">Bool</a> <a href="../base-4.10.1.0/Data-Bool.html#t:Bool">Bool</a> <a href="../base-4.10.1.0/Data-Bool.html#t:Bool">Bool</a> <a href="Network-WebSockets.html#t:DataMessage">DataMessage</a></td><td class="doc"><p>Reserved bits, actual message</p></td></tr></table></div><div class="subs instances"><p id="control.i:Message" class="caption collapser" onclick="toggleSection('i:Message')">Instances</p><div id="section.i:Message" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:Message:Eq:1" class="instance expander" onclick="toggleSection('i:id:Message:Eq:1')"></span> <a href="../base-4.10.1.0/Data-Eq.html#t:Eq">Eq</a> <a href="Network-WebSockets.html#t:Message">Message</a></span> <a href="src/Network.WebSockets.Types.html#line-44" class="link">Source</a> <a href="#t:Message" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:Message:Eq:1" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-61--61-">(==)</a> :: <a href="Network-WebSockets.html#t:Message">Message</a> -&gt; <a href="Network-WebSockets.html#t:Message">Message</a> -&gt; <a href="../base-4.10.1.0/Data-Bool.html#t:Bool">Bool</a> <a href="#v:-61--61-" class="selflink">#</a></p><p class="src"><a href="#v:-47--61-">(/=)</a> :: <a href="Network-WebSockets.html#t:Message">Message</a> -&gt; <a href="Network-WebSockets.html#t:Message">Message</a> -&gt; <a href="../base-4.10.1.0/Data-Bool.html#t:Bool">Bool</a> <a href="#v:-47--61-" class="selflink">#</a></p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:Message:Show:2" class="instance expander" onclick="toggleSection('i:id:Message:Show:2')"></span> <a href="../base-4.10.1.0/Text-Show.html#t:Show">Show</a> <a href="Network-WebSockets.html#t:Message">Message</a></span> <a href="src/Network.WebSockets.Types.html#line-44" class="link">Source</a> <a href="#t:Message" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:Message:Show:2" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: <a href="../base-4.10.1.0/Data-Int.html#t:Int">Int</a> -&gt; <a href="Network-WebSockets.html#t:Message">Message</a> -&gt; <a href="../base-4.10.1.0/Text-Show.html#t:ShowS">ShowS</a> <a href="#v:showsPrec" class="selflink">#</a></p><p class="src"><a href="#v:show">show</a> :: <a href="Network-WebSockets.html#t:Message">Message</a> -&gt; <a href="../base-4.10.1.0/Data-String.html#t:String">String</a> <a href="#v:show" class="selflink">#</a></p><p class="src"><a href="#v:showList">showList</a> :: [<a href="Network-WebSockets.html#t:Message">Message</a>] -&gt; <a href="../base-4.10.1.0/Text-Show.html#t:ShowS">ShowS</a> <a href="#v:showList" class="selflink">#</a></p></div></div></td></tr></table></div></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:ControlMessage" class="def">ControlMessage</a> <a href="src/Network.WebSockets.Types.html#ControlMessage" class="link">Source</a> <a href="#t:ControlMessage" class="selflink">#</a></p><div class="doc"><p>Different control messages</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:Close" class="def">Close</a> <a href="../base-4.10.1.0/Data-Word.html#t:Word16">Word16</a> <a href="../bytestring-0.10.8.2/Data-ByteString-Lazy.html#t:ByteString">ByteString</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a id="v:Ping" class="def">Ping</a> <a href="../bytestring-0.10.8.2/Data-ByteString-Lazy.html#t:ByteString">ByteString</a></td><td class="doc empty">&nbsp;</td></tr><tr><td class="src"><a id="v:Pong" class="def">Pong</a> <a href="../bytestring-0.10.8.2/Data-ByteString-Lazy.html#t:ByteString">ByteString</a></td><td class="doc empty">&nbsp;</td></tr></table></div><div class="subs instances"><p id="control.i:ControlMessage" class="caption collapser" onclick="toggleSection('i:ControlMessage')">Instances</p><div id="section.i:ControlMessage" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:ControlMessage:Eq:1" class="instance expander" onclick="toggleSection('i:id:ControlMessage:Eq:1')"></span> <a href="../base-4.10.1.0/Data-Eq.html#t:Eq">Eq</a> <a href="Network-WebSockets.html#t:ControlMessage">ControlMessage</a></span> <a href="src/Network.WebSockets.Types.html#line-53" class="link">Source</a> <a href="#t:ControlMessage" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:ControlMessage:Eq:1" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-61--61-">(==)</a> :: <a href="Network-WebSockets.html#t:ControlMessage">ControlMessage</a> -&gt; <a href="Network-WebSockets.html#t:ControlMessage">ControlMessage</a> -&gt; <a href="../base-4.10.1.0/Data-Bool.html#t:Bool">Bool</a> <a href="#v:-61--61-" class="selflink">#</a></p><p class="src"><a href="#v:-47--61-">(/=)</a> :: <a href="Network-WebSockets.html#t:ControlMessage">ControlMessage</a> -&gt; <a href="Network-WebSockets.html#t:ControlMessage">ControlMessage</a> -&gt; <a href="../base-4.10.1.0/Data-Bool.html#t:Bool">Bool</a> <a href="#v:-47--61-" class="selflink">#</a></p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:ControlMessage:Show:2" class="instance expander" onclick="toggleSection('i:id:ControlMessage:Show:2')"></span> <a href="../base-4.10.1.0/Text-Show.html#t:Show">Show</a> <a href="Network-WebSockets.html#t:ControlMessage">ControlMessage</a></span> <a href="src/Network.WebSockets.Types.html#line-53" class="link">Source</a> <a href="#t:ControlMessage" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:ControlMessage:Show:2" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: <a href="../base-4.10.1.0/Data-Int.html#t:Int">Int</a> -&gt; <a href="Network-WebSockets.html#t:ControlMessage">ControlMessage</a> -&gt; <a href="../base-4.10.1.0/Text-Show.html#t:ShowS">ShowS</a> <a href="#v:showsPrec" class="selflink">#</a></p><p class="src"><a href="#v:show">show</a> :: <a href="Network-WebSockets.html#t:ControlMessage">ControlMessage</a> -&gt; <a href="../base-4.10.1.0/Data-String.html#t:String">String</a> <a href="#v:show" class="selflink">#</a></p><p class="src"><a href="#v:showList">showList</a> :: [<a href="Network-WebSockets.html#t:ControlMessage">ControlMessage</a>] -&gt; <a href="../base-4.10.1.0/Text-Show.html#t:ShowS">ShowS</a> <a href="#v:showList" class="selflink">#</a></p></div></div></td></tr></table></div></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:DataMessage" class="def">DataMessage</a> <a href="src/Network.WebSockets.Types.html#DataMessage" class="link">Source</a> <a href="#t:DataMessage" class="selflink">#</a></p><div class="doc"><p>For an end-user of this library, dealing with <code>Frame</code>s would be a bit
 low-level. This is why define another type on top of it, which represents
 data for the application layer.</p><p>There are currently two kinds of data messages supported by the WebSockets
 protocol:</p><ul><li>Textual UTF-8 encoded data.  This corresponds roughly to sending a String
 in JavaScript.</li><li>Binary data.  This corresponds roughly to send an ArrayBuffer in
 JavaScript.</li></ul></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:Text" class="def">Text</a> <a href="../bytestring-0.10.8.2/Data-ByteString-Lazy.html#t:ByteString">ByteString</a> (<a href="../base-4.10.1.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="../text-1.2.2.2/Data-Text-Lazy.html#t:Text">Text</a>)</td><td class="doc"><p>A textual message.  The second field <em>might</em> contain the decoded UTF-8
 text for caching reasons.  This field is computed lazily so if it's not
 accessed, it should have no performance impact.</p></td></tr><tr><td class="src"><a id="v:Binary" class="def">Binary</a> <a href="../bytestring-0.10.8.2/Data-ByteString-Lazy.html#t:ByteString">ByteString</a></td><td class="doc"><p>A binary message.</p></td></tr></table></div><div class="subs instances"><p id="control.i:DataMessage" class="caption collapser" onclick="toggleSection('i:DataMessage')">Instances</p><div id="section.i:DataMessage" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:DataMessage:Eq:1" class="instance expander" onclick="toggleSection('i:id:DataMessage:Eq:1')"></span> <a href="../base-4.10.1.0/Data-Eq.html#t:Eq">Eq</a> <a href="Network-WebSockets.html#t:DataMessage">DataMessage</a></span> <a href="src/Network.WebSockets.Types.html#line-76" class="link">Source</a> <a href="#t:DataMessage" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:DataMessage:Eq:1" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-61--61-">(==)</a> :: <a href="Network-WebSockets.html#t:DataMessage">DataMessage</a> -&gt; <a href="Network-WebSockets.html#t:DataMessage">DataMessage</a> -&gt; <a href="../base-4.10.1.0/Data-Bool.html#t:Bool">Bool</a> <a href="#v:-61--61-" class="selflink">#</a></p><p class="src"><a href="#v:-47--61-">(/=)</a> :: <a href="Network-WebSockets.html#t:DataMessage">DataMessage</a> -&gt; <a href="Network-WebSockets.html#t:DataMessage">DataMessage</a> -&gt; <a href="../base-4.10.1.0/Data-Bool.html#t:Bool">Bool</a> <a href="#v:-47--61-" class="selflink">#</a></p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:DataMessage:Show:2" class="instance expander" onclick="toggleSection('i:id:DataMessage:Show:2')"></span> <a href="../base-4.10.1.0/Text-Show.html#t:Show">Show</a> <a href="Network-WebSockets.html#t:DataMessage">DataMessage</a></span> <a href="src/Network.WebSockets.Types.html#line-76" class="link">Source</a> <a href="#t:DataMessage" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:DataMessage:Show:2" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: <a href="../base-4.10.1.0/Data-Int.html#t:Int">Int</a> -&gt; <a href="Network-WebSockets.html#t:DataMessage">DataMessage</a> -&gt; <a href="../base-4.10.1.0/Text-Show.html#t:ShowS">ShowS</a> <a href="#v:showsPrec" class="selflink">#</a></p><p class="src"><a href="#v:show">show</a> :: <a href="Network-WebSockets.html#t:DataMessage">DataMessage</a> -&gt; <a href="../base-4.10.1.0/Data-String.html#t:String">String</a> <a href="#v:show" class="selflink">#</a></p><p class="src"><a href="#v:showList">showList</a> :: [<a href="Network-WebSockets.html#t:DataMessage">DataMessage</a>] -&gt; <a href="../base-4.10.1.0/Text-Show.html#t:ShowS">ShowS</a> <a href="#v:showList" class="selflink">#</a></p></div></div></td></tr></table></div></div></div><div class="top"><p class="src"><span class="keyword">class</span> <a id="t:WebSocketsData" class="def">WebSocketsData</a> a <span class="keyword">where</span> <a href="src/Network.WebSockets.Types.html#WebSocketsData" class="link">Source</a> <a href="#t:WebSocketsData" class="selflink">#</a></p><div class="doc"><p>In order to have an even more high-level API, we define a typeclass for
 values the user can receive from and send to the socket. A few warnings
 apply:</p><ul><li>Natively, everything is represented as a <code><a href="../bytestring-0.10.8.2/Data-ByteString-Lazy.html#t:ByteString">ByteString</a></code>, so this is the
   fastest instance</li><li>You should only use the <code><a href="../text-1.2.2.2/Data-Text-Lazy.html#t:Text">Text</a></code> or the <code><a href="../text-1.2.2.2/Data-Text.html#t:Text">Text</a></code> instance when you are
   sure that the data is UTF-8 encoded (which is the case for <code><a href="Network-WebSockets.html#v:Text">Text</a></code>
   messages).</li><li>Messages can be very large. If this is the case, it might be inefficient to
   use the strict <code><a href="../bytestring-0.10.8.2/Data-ByteString.html#t:ByteString">ByteString</a></code> and <code><a href="../text-1.2.2.2/Data-Text.html#t:Text">Text</a></code> instances.</li></ul></div><div class="subs minimal"><p class="caption">Minimal complete definition</p><p class="src"><a href="Network-WebSockets.html#v:fromDataMessage">fromDataMessage</a>, <a href="Network-WebSockets.html#v:fromLazyByteString">fromLazyByteString</a>, <a href="Network-WebSockets.html#v:toLazyByteString">toLazyByteString</a></p></div><div class="subs methods"><p class="caption">Methods</p><p class="src"><a id="v:fromDataMessage" class="def">fromDataMessage</a> :: <a href="Network-WebSockets.html#t:DataMessage">DataMessage</a> -&gt; a <a href="src/Network.WebSockets.Types.html#fromDataMessage" class="link">Source</a> <a href="#v:fromDataMessage" class="selflink">#</a></p><p class="src"><a id="v:fromLazyByteString" class="def">fromLazyByteString</a> :: <a href="../bytestring-0.10.8.2/Data-ByteString-Lazy.html#t:ByteString">ByteString</a> -&gt; a <a href="src/Network.WebSockets.Types.html#fromLazyByteString" class="link">Source</a> <a href="#v:fromLazyByteString" class="selflink">#</a></p><p class="src"><a id="v:toLazyByteString" class="def">toLazyByteString</a> :: a -&gt; <a href="../bytestring-0.10.8.2/Data-ByteString-Lazy.html#t:ByteString">ByteString</a> <a href="src/Network.WebSockets.Types.html#toLazyByteString" class="link">Source</a> <a href="#v:toLazyByteString" class="selflink">#</a></p></div><div class="subs instances"><p id="control.i:WebSocketsData" class="caption collapser" onclick="toggleSection('i:WebSocketsData')">Instances</p><div id="section.i:WebSocketsData" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:ic:WebSocketsData:WebSocketsData:1" class="instance expander" onclick="toggleSection('i:ic:WebSocketsData:WebSocketsData:1')"></span> <a href="Network-WebSockets.html#t:WebSocketsData">WebSocketsData</a> <a href="../bytestring-0.10.8.2/Data-ByteString.html#t:ByteString">ByteString</a></span> <a href="src/Network.WebSockets.Types.html#line-110" class="link">Source</a> <a href="#t:WebSocketsData" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:ic:WebSocketsData:WebSocketsData:1" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:fromDataMessage">fromDataMessage</a> :: <a href="Network-WebSockets.html#t:DataMessage">DataMessage</a> -&gt; <a href="../bytestring-0.10.8.2/Data-ByteString.html#t:ByteString">ByteString</a> <a href="src/Network.WebSockets.Types.html#fromDataMessage" class="link">Source</a> <a href="#v:fromDataMessage" class="selflink">#</a></p><p class="src"><a href="#v:fromLazyByteString">fromLazyByteString</a> :: <a href="../bytestring-0.10.8.2/Data-ByteString-Lazy.html#t:ByteString">ByteString</a> -&gt; <a href="../bytestring-0.10.8.2/Data-ByteString.html#t:ByteString">ByteString</a> <a href="src/Network.WebSockets.Types.html#fromLazyByteString" class="link">Source</a> <a href="#v:fromLazyByteString" class="selflink">#</a></p><p class="src"><a href="#v:toLazyByteString">toLazyByteString</a> :: <a href="../bytestring-0.10.8.2/Data-ByteString.html#t:ByteString">ByteString</a> -&gt; <a href="../bytestring-0.10.8.2/Data-ByteString-Lazy.html#t:ByteString">ByteString</a> <a href="src/Network.WebSockets.Types.html#toLazyByteString" class="link">Source</a> <a href="#v:toLazyByteString" class="selflink">#</a></p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:ic:WebSocketsData:WebSocketsData:2" class="instance expander" onclick="toggleSection('i:ic:WebSocketsData:WebSocketsData:2')"></span> <a href="Network-WebSockets.html#t:WebSocketsData">WebSocketsData</a> <a href="../bytestring-0.10.8.2/Data-ByteString-Lazy.html#t:ByteString">ByteString</a></span> <a href="src/Network.WebSockets.Types.html#line-101" class="link">Source</a> <a href="#t:WebSocketsData" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:ic:WebSocketsData:WebSocketsData:2" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:fromDataMessage">fromDataMessage</a> :: <a href="Network-WebSockets.html#t:DataMessage">DataMessage</a> -&gt; <a href="../bytestring-0.10.8.2/Data-ByteString-Lazy.html#t:ByteString">ByteString</a> <a href="src/Network.WebSockets.Types.html#fromDataMessage" class="link">Source</a> <a href="#v:fromDataMessage" class="selflink">#</a></p><p class="src"><a href="#v:fromLazyByteString">fromLazyByteString</a> :: <a href="../bytestring-0.10.8.2/Data-ByteString-Lazy.html#t:ByteString">ByteString</a> -&gt; <a href="../bytestring-0.10.8.2/Data-ByteString-Lazy.html#t:ByteString">ByteString</a> <a href="src/Network.WebSockets.Types.html#fromLazyByteString" class="link">Source</a> <a href="#v:fromLazyByteString" class="selflink">#</a></p><p class="src"><a href="#v:toLazyByteString">toLazyByteString</a> :: <a href="../bytestring-0.10.8.2/Data-ByteString-Lazy.html#t:ByteString">ByteString</a> -&gt; <a href="../bytestring-0.10.8.2/Data-ByteString-Lazy.html#t:ByteString">ByteString</a> <a href="src/Network.WebSockets.Types.html#toLazyByteString" class="link">Source</a> <a href="#v:toLazyByteString" class="selflink">#</a></p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:ic:WebSocketsData:WebSocketsData:3" class="instance expander" onclick="toggleSection('i:ic:WebSocketsData:WebSocketsData:3')"></span> <a href="Network-WebSockets.html#t:WebSocketsData">WebSocketsData</a> <a href="../text-1.2.2.2/Data-Text-Lazy.html#t:Text">Text</a></span> <a href="src/Network.WebSockets.Types.html#line-119" class="link">Source</a> <a href="#t:WebSocketsData" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:ic:WebSocketsData:WebSocketsData:3" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:fromDataMessage">fromDataMessage</a> :: <a href="Network-WebSockets.html#t:DataMessage">DataMessage</a> -&gt; <a href="../text-1.2.2.2/Data-Text-Lazy.html#t:Text">Text</a> <a href="src/Network.WebSockets.Types.html#fromDataMessage" class="link">Source</a> <a href="#v:fromDataMessage" class="selflink">#</a></p><p class="src"><a href="#v:fromLazyByteString">fromLazyByteString</a> :: <a href="../bytestring-0.10.8.2/Data-ByteString-Lazy.html#t:ByteString">ByteString</a> -&gt; <a href="../text-1.2.2.2/Data-Text-Lazy.html#t:Text">Text</a> <a href="src/Network.WebSockets.Types.html#fromLazyByteString" class="link">Source</a> <a href="#v:fromLazyByteString" class="selflink">#</a></p><p class="src"><a href="#v:toLazyByteString">toLazyByteString</a> :: <a href="../text-1.2.2.2/Data-Text-Lazy.html#t:Text">Text</a> -&gt; <a href="../bytestring-0.10.8.2/Data-ByteString-Lazy.html#t:ByteString">ByteString</a> <a href="src/Network.WebSockets.Types.html#toLazyByteString" class="link">Source</a> <a href="#v:toLazyByteString" class="selflink">#</a></p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:ic:WebSocketsData:WebSocketsData:4" class="instance expander" onclick="toggleSection('i:ic:WebSocketsData:WebSocketsData:4')"></span> <a href="Network-WebSockets.html#t:WebSocketsData">WebSocketsData</a> <a href="../text-1.2.2.2/Data-Text.html#t:Text">Text</a></span> <a href="src/Network.WebSockets.Types.html#line-130" class="link">Source</a> <a href="#t:WebSocketsData" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:ic:WebSocketsData:WebSocketsData:4" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:fromDataMessage">fromDataMessage</a> :: <a href="Network-WebSockets.html#t:DataMessage">DataMessage</a> -&gt; <a href="../text-1.2.2.2/Data-Text.html#t:Text">Text</a> <a href="src/Network.WebSockets.Types.html#fromDataMessage" class="link">Source</a> <a href="#v:fromDataMessage" class="selflink">#</a></p><p class="src"><a href="#v:fromLazyByteString">fromLazyByteString</a> :: <a href="../bytestring-0.10.8.2/Data-ByteString-Lazy.html#t:ByteString">ByteString</a> -&gt; <a href="../text-1.2.2.2/Data-Text.html#t:Text">Text</a> <a href="src/Network.WebSockets.Types.html#fromLazyByteString" class="link">Source</a> <a href="#v:fromLazyByteString" class="selflink">#</a></p><p class="src"><a href="#v:toLazyByteString">toLazyByteString</a> :: <a href="../text-1.2.2.2/Data-Text.html#t:Text">Text</a> -&gt; <a href="../bytestring-0.10.8.2/Data-ByteString-Lazy.html#t:ByteString">ByteString</a> <a href="src/Network.WebSockets.Types.html#toLazyByteString" class="link">Source</a> <a href="#v:toLazyByteString" class="selflink">#</a></p></div></div></td></tr></table></div></div></div><h1 id="g:9">Exceptions</h1><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:HandshakeException" class="def">HandshakeException</a> <a href="src/Network.WebSockets.Http.html#HandshakeException" class="link">Source</a> <a href="#t:HandshakeException" class="selflink">#</a></p><div class="doc"><p>Error in case of failed handshake. Will be thrown as an <code><a href="../base-4.10.1.0/Control-Exception-Base.html#t:Exception">Exception</a></code>.</p><p>TODO: This should probably be in the Handshake module, and is solely here to
 prevent a cyclic dependency.</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:NotSupported" class="def">NotSupported</a></td><td class="doc"><p>We don't have a match for the protocol requested by the client.
 todo: version parameter</p></td></tr><tr><td class="src"><a id="v:MalformedRequest" class="def">MalformedRequest</a> <a href="Network-WebSockets.html#t:RequestHead">RequestHead</a> <a href="../base-4.10.1.0/Data-String.html#t:String">String</a></td><td class="doc"><p>The request was somehow invalid (missing headers or wrong security
 token)</p></td></tr><tr><td class="src"><a id="v:MalformedResponse" class="def">MalformedResponse</a> <a href="Network-WebSockets.html#t:ResponseHead">ResponseHead</a> <a href="../base-4.10.1.0/Data-String.html#t:String">String</a></td><td class="doc"><p>The servers response was somehow invalid (missing headers or wrong
 security token)</p></td></tr><tr><td class="src"><a id="v:RequestRejected" class="def">RequestRejected</a> <a href="Network-WebSockets.html#t:Request">Request</a> <a href="../base-4.10.1.0/Data-String.html#t:String">String</a></td><td class="doc"><p>The request was well-formed, but the library user rejected it.
 (e.g. &quot;unknown path&quot;)</p></td></tr><tr><td class="src"><a id="v:OtherHandshakeException" class="def">OtherHandshakeException</a> <a href="../base-4.10.1.0/Data-String.html#t:String">String</a></td><td class="doc"><p>for example &quot;EOF came too early&quot; (which is actually a parse error)
 or for your own errors. (like &quot;unknown path&quot;?)</p></td></tr></table></div><div class="subs instances"><p id="control.i:HandshakeException" class="caption collapser" onclick="toggleSection('i:HandshakeException')">Instances</p><div id="section.i:HandshakeException" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:HandshakeException:Show:1" class="instance expander" onclick="toggleSection('i:id:HandshakeException:Show:1')"></span> <a href="../base-4.10.1.0/Text-Show.html#t:Show">Show</a> <a href="Network-WebSockets.html#t:HandshakeException">HandshakeException</a></span> <a href="src/Network.WebSockets.Http.html#line-107" class="link">Source</a> <a href="#t:HandshakeException" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:HandshakeException:Show:1" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: <a href="../base-4.10.1.0/Data-Int.html#t:Int">Int</a> -&gt; <a href="Network-WebSockets.html#t:HandshakeException">HandshakeException</a> -&gt; <a href="../base-4.10.1.0/Text-Show.html#t:ShowS">ShowS</a> <a href="#v:showsPrec" class="selflink">#</a></p><p class="src"><a href="#v:show">show</a> :: <a href="Network-WebSockets.html#t:HandshakeException">HandshakeException</a> -&gt; <a href="../base-4.10.1.0/Data-String.html#t:String">String</a> <a href="#v:show" class="selflink">#</a></p><p class="src"><a href="#v:showList">showList</a> :: [<a href="Network-WebSockets.html#t:HandshakeException">HandshakeException</a>] -&gt; <a href="../base-4.10.1.0/Text-Show.html#t:ShowS">ShowS</a> <a href="#v:showList" class="selflink">#</a></p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:HandshakeException:Exception:2" class="instance expander" onclick="toggleSection('i:id:HandshakeException:Exception:2')"></span> <a href="../base-4.10.1.0/Control-Exception-Base.html#t:Exception">Exception</a> <a href="Network-WebSockets.html#t:HandshakeException">HandshakeException</a></span> <a href="src/Network.WebSockets.Http.html#line-111" class="link">Source</a> <a href="#t:HandshakeException" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:HandshakeException:Exception:2" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:toException">toException</a> :: <a href="Network-WebSockets.html#t:HandshakeException">HandshakeException</a> -&gt; <a href="../base-4.10.1.0/Control-Exception-Base.html#t:SomeException">SomeException</a> <a href="#v:toException" class="selflink">#</a></p><p class="src"><a href="#v:fromException">fromException</a> :: <a href="../base-4.10.1.0/Control-Exception-Base.html#t:SomeException">SomeException</a> -&gt; <a href="../base-4.10.1.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="Network-WebSockets.html#t:HandshakeException">HandshakeException</a> <a href="#v:fromException" class="selflink">#</a></p><p class="src"><a href="#v:displayException">displayException</a> :: <a href="Network-WebSockets.html#t:HandshakeException">HandshakeException</a> -&gt; <a href="../base-4.10.1.0/Data-String.html#t:String">String</a> <a href="#v:displayException" class="selflink">#</a></p></div></div></td></tr></table></div></div></div><div class="top"><p class="src"><span class="keyword">data</span> <a id="t:ConnectionException" class="def">ConnectionException</a> <a href="src/Network.WebSockets.Types.html#ConnectionException" class="link">Source</a> <a href="#t:ConnectionException" class="selflink">#</a></p><div class="doc"><p>Various exceptions that can occur while receiving or transmitting messages</p></div><div class="subs constructors"><p class="caption">Constructors</p><table><tr><td class="src"><a id="v:CloseRequest" class="def">CloseRequest</a> <a href="../base-4.10.1.0/Data-Word.html#t:Word16">Word16</a> <a href="../bytestring-0.10.8.2/Data-ByteString-Lazy.html#t:ByteString">ByteString</a></td><td class="doc"><p>The peer has requested that the connection be closed, and included
 a close code and a reason for closing.  When receiving this exception,
 no more messages can be sent.  Also, the server is responsible for
 closing the TCP connection once this exception is received.</p><p>See <a href="http://tools.ietf.org/html/rfc6455#section-7.4">http://tools.ietf.org/html/rfc6455#section-7.4</a> for a list of close
 codes.</p></td></tr><tr><td class="src"><a id="v:ConnectionClosed" class="def">ConnectionClosed</a></td><td class="doc"><p>The peer unexpectedly closed the connection while we were trying to
 receive some data.  This is a violation of the websocket RFC since the
 TCP connection should only be closed after sending and receiving close
 control messages.</p></td></tr><tr><td class="src"><a id="v:ParseException" class="def">ParseException</a> <a href="../base-4.10.1.0/Data-String.html#t:String">String</a></td><td class="doc"><p>The client sent garbage, i.e. we could not parse the WebSockets stream.</p></td></tr><tr><td class="src"><a id="v:UnicodeException" class="def">UnicodeException</a> <a href="../base-4.10.1.0/Data-String.html#t:String">String</a></td><td class="doc"><p>The client sent invalid UTF-8.  Note that this exception will only be
 thrown if strict decoding is set in the connection options.</p></td></tr></table></div><div class="subs instances"><p id="control.i:ConnectionException" class="caption collapser" onclick="toggleSection('i:ConnectionException')">Instances</p><div id="section.i:ConnectionException" class="show"><table><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:ConnectionException:Eq:1" class="instance expander" onclick="toggleSection('i:id:ConnectionException:Eq:1')"></span> <a href="../base-4.10.1.0/Data-Eq.html#t:Eq">Eq</a> <a href="Network-WebSockets.html#t:ConnectionException">ConnectionException</a></span> <a href="src/Network.WebSockets.Types.html#line-163" class="link">Source</a> <a href="#t:ConnectionException" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:ConnectionException:Eq:1" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:-61--61-">(==)</a> :: <a href="Network-WebSockets.html#t:ConnectionException">ConnectionException</a> -&gt; <a href="Network-WebSockets.html#t:ConnectionException">ConnectionException</a> -&gt; <a href="../base-4.10.1.0/Data-Bool.html#t:Bool">Bool</a> <a href="#v:-61--61-" class="selflink">#</a></p><p class="src"><a href="#v:-47--61-">(/=)</a> :: <a href="Network-WebSockets.html#t:ConnectionException">ConnectionException</a> -&gt; <a href="Network-WebSockets.html#t:ConnectionException">ConnectionException</a> -&gt; <a href="../base-4.10.1.0/Data-Bool.html#t:Bool">Bool</a> <a href="#v:-47--61-" class="selflink">#</a></p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:ConnectionException:Show:2" class="instance expander" onclick="toggleSection('i:id:ConnectionException:Show:2')"></span> <a href="../base-4.10.1.0/Text-Show.html#t:Show">Show</a> <a href="Network-WebSockets.html#t:ConnectionException">ConnectionException</a></span> <a href="src/Network.WebSockets.Types.html#line-163" class="link">Source</a> <a href="#t:ConnectionException" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:ConnectionException:Show:2" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:showsPrec">showsPrec</a> :: <a href="../base-4.10.1.0/Data-Int.html#t:Int">Int</a> -&gt; <a href="Network-WebSockets.html#t:ConnectionException">ConnectionException</a> -&gt; <a href="../base-4.10.1.0/Text-Show.html#t:ShowS">ShowS</a> <a href="#v:showsPrec" class="selflink">#</a></p><p class="src"><a href="#v:show">show</a> :: <a href="Network-WebSockets.html#t:ConnectionException">ConnectionException</a> -&gt; <a href="../base-4.10.1.0/Data-String.html#t:String">String</a> <a href="#v:show" class="selflink">#</a></p><p class="src"><a href="#v:showList">showList</a> :: [<a href="Network-WebSockets.html#t:ConnectionException">ConnectionException</a>] -&gt; <a href="../base-4.10.1.0/Text-Show.html#t:ShowS">ShowS</a> <a href="#v:showList" class="selflink">#</a></p></div></div></td></tr><tr><td class="src clearfix"><span class="inst-left"><span id="control.i:id:ConnectionException:Exception:3" class="instance expander" onclick="toggleSection('i:id:ConnectionException:Exception:3')"></span> <a href="../base-4.10.1.0/Control-Exception-Base.html#t:Exception">Exception</a> <a href="Network-WebSockets.html#t:ConnectionException">ConnectionException</a></span> <a href="src/Network.WebSockets.Types.html#line-167" class="link">Source</a> <a href="#t:ConnectionException" class="selflink">#</a></td><td class="doc empty">&nbsp;</td></tr><tr><td colspan="2"><div id="section.i:id:ConnectionException:Exception:3" class="inst-details hide"><div class="subs methods"><p class="caption">Methods</p><p class="src"><a href="#v:toException">toException</a> :: <a href="Network-WebSockets.html#t:ConnectionException">ConnectionException</a> -&gt; <a href="../base-4.10.1.0/Control-Exception-Base.html#t:SomeException">SomeException</a> <a href="#v:toException" class="selflink">#</a></p><p class="src"><a href="#v:fromException">fromException</a> :: <a href="../base-4.10.1.0/Control-Exception-Base.html#t:SomeException">SomeException</a> -&gt; <a href="../base-4.10.1.0/Data-Maybe.html#t:Maybe">Maybe</a> <a href="Network-WebSockets.html#t:ConnectionException">ConnectionException</a> <a href="#v:fromException" class="selflink">#</a></p><p class="src"><a href="#v:displayException">displayException</a> :: <a href="Network-WebSockets.html#t:ConnectionException">ConnectionException</a> -&gt; <a href="../base-4.10.1.0/Data-String.html#t:String">String</a> <a href="#v:displayException" class="selflink">#</a></p></div></div></td></tr></table></div></div></div><h1 id="g:10">Running a standalone server</h1><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:ServerApp" class="def">ServerApp</a> = <a href="Network-WebSockets.html#t:PendingConnection">PendingConnection</a> -&gt; <a href="../base-4.10.1.0/System-IO.html#t:IO">IO</a> () <a href="src/Network.WebSockets.Server.html#ServerApp" class="link">Source</a> <a href="#t:ServerApp" class="selflink">#</a></p><div class="doc"><p>WebSockets application that can be ran by a server. Once this <code><a href="../base-4.10.1.0/System-IO.html#t:IO">IO</a></code> action
 finishes, the underlying socket is closed automatically.</p></div></div><div class="top"><p class="src"><a id="v:runServer" class="def">runServer</a> <a href="src/Network.WebSockets.Server.html#runServer" class="link">Source</a> <a href="#v:runServer" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="../base-4.10.1.0/Data-String.html#t:String">String</a></td><td class="doc"><p>Address to bind</p></td></tr><tr><td class="src">-&gt; <a href="../base-4.10.1.0/Data-Int.html#t:Int">Int</a></td><td class="doc"><p>Port to listen on</p></td></tr><tr><td class="src">-&gt; <a href="Network-WebSockets.html#t:ServerApp">ServerApp</a></td><td class="doc"><p>Application</p></td></tr><tr><td class="src">-&gt; <a href="../base-4.10.1.0/System-IO.html#t:IO">IO</a> ()</td><td class="doc"><p>Never returns</p></td></tr></table></div><div class="doc"><p>Provides a simple server. This function blocks forever.  Note that this
 is merely provided for quick-and-dirty or internal applications, but for real
 applications, you should use a real server.</p><p>For example:</p><ul><li>Performance is reasonable under load, but:</li><li>No protection against DoS attacks is provided.</li><li>No logging is performed.</li><li>...</li></ul><p>Glue for using this package with real servers is provided by:</p><ul><li><a href="https://hackage.haskell.org/package/wai-websockets">https://hackage.haskell.org/package/wai-websockets</a></li><li><a href="https://hackage.haskell.org/package/websockets-snap">https://hackage.haskell.org/package/websockets-snap</a></li></ul></div></div><div class="top"><p class="src"><a id="v:runServerWith" class="def">runServerWith</a> :: <a href="../base-4.10.1.0/Data-String.html#t:String">String</a> -&gt; <a href="../base-4.10.1.0/Data-Int.html#t:Int">Int</a> -&gt; <a href="Network-WebSockets.html#t:ConnectionOptions">ConnectionOptions</a> -&gt; <a href="Network-WebSockets.html#t:ServerApp">ServerApp</a> -&gt; <a href="../base-4.10.1.0/System-IO.html#t:IO">IO</a> () <a href="src/Network.WebSockets.Server.html#runServerWith" class="link">Source</a> <a href="#v:runServerWith" class="selflink">#</a></p><div class="doc"><p>A version of <code><a href="Network-WebSockets.html#v:runServer">runServer</a></code> which allows you to customize some options.</p></div></div><h1 id="g:11">Utilities for writing your own server</h1><div class="top"><p class="src"><a id="v:makeListenSocket" class="def">makeListenSocket</a> :: <a href="../base-4.10.1.0/Data-String.html#t:String">String</a> -&gt; <a href="../base-4.10.1.0/Data-Int.html#t:Int">Int</a> -&gt; <a href="../base-4.10.1.0/System-IO.html#t:IO">IO</a> <a href="../network-2.6.3.3/Network-Socket.html#t:Socket">Socket</a> <a href="src/Network.WebSockets.Server.html#makeListenSocket" class="link">Source</a> <a href="#v:makeListenSocket" class="selflink">#</a></p><div class="doc"><p>Create a standardized socket on which you can listen for incomming
 connections. Should only be used for a quick and dirty solution! Should be
 preceded by the call <code><a href="../network-2.6.3.3/Network-Socket.html#v:withSocketsDo">withSocketsDo</a></code>.</p></div></div><div class="top"><p class="src"><a id="v:makePendingConnection" class="def">makePendingConnection</a> :: <a href="../network-2.6.3.3/Network-Socket.html#t:Socket">Socket</a> -&gt; <a href="Network-WebSockets.html#t:ConnectionOptions">ConnectionOptions</a> -&gt; <a href="../base-4.10.1.0/System-IO.html#t:IO">IO</a> <a href="Network-WebSockets.html#t:PendingConnection">PendingConnection</a> <a href="src/Network.WebSockets.Server.html#makePendingConnection" class="link">Source</a> <a href="#v:makePendingConnection" class="selflink">#</a></p><div class="doc"><p>Turns a socket, connected to some client, into a <code><a href="Network-WebSockets.html#t:PendingConnection">PendingConnection</a></code>. The
 <code><a href="Network-WebSockets.html#t:PendingConnection">PendingConnection</a></code> should be closed using <code><a href="Network-WebSockets-Stream.html#v:close">close</a></code> later.</p></div></div><div class="top"><p class="src"><a id="v:makePendingConnectionFromStream" class="def">makePendingConnectionFromStream</a> :: <a href="Network-WebSockets-Stream.html#t:Stream">Stream</a> -&gt; <a href="Network-WebSockets.html#t:ConnectionOptions">ConnectionOptions</a> -&gt; <a href="../base-4.10.1.0/System-IO.html#t:IO">IO</a> <a href="Network-WebSockets.html#t:PendingConnection">PendingConnection</a> <a href="src/Network.WebSockets.Server.html#makePendingConnectionFromStream" class="link">Source</a> <a href="#v:makePendingConnectionFromStream" class="selflink">#</a></p><div class="doc"><p>More general version of <code><a href="Network-WebSockets.html#v:makePendingConnection">makePendingConnection</a></code> for <code><a href="Network-WebSockets-Stream.html#t:Stream">Stream</a></code>
 instead of a <code><a href="../network-2.6.3.3/Network-Socket.html#t:Socket">Socket</a></code>.</p></div></div><h1 id="g:12">Running a client</h1><div class="top"><p class="src"><span class="keyword">type</span> <a id="t:ClientApp" class="def">ClientApp</a> a = <a href="Network-WebSockets.html#t:Connection">Connection</a> -&gt; <a href="../base-4.10.1.0/System-IO.html#t:IO">IO</a> a <a href="src/Network.WebSockets.Client.html#ClientApp" class="link">Source</a> <a href="#t:ClientApp" class="selflink">#</a></p><div class="doc"><p>A client application interacting with a single server. Once this <code><a href="../base-4.10.1.0/System-IO.html#t:IO">IO</a></code>
 action finished, the underlying socket is closed automatically.</p></div></div><div class="top"><p class="src"><a id="v:runClient" class="def">runClient</a> <a href="src/Network.WebSockets.Client.html#runClient" class="link">Source</a> <a href="#v:runClient" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="../base-4.10.1.0/Data-String.html#t:String">String</a></td><td class="doc"><p>Host</p></td></tr><tr><td class="src">-&gt; <a href="../base-4.10.1.0/Data-Int.html#t:Int">Int</a></td><td class="doc"><p>Port</p></td></tr><tr><td class="src">-&gt; <a href="../base-4.10.1.0/Data-String.html#t:String">String</a></td><td class="doc"><p>Path</p></td></tr><tr><td class="src">-&gt; <a href="Network-WebSockets.html#t:ClientApp">ClientApp</a> a</td><td class="doc"><p>Client application</p></td></tr><tr><td class="src">-&gt; <a href="../base-4.10.1.0/System-IO.html#t:IO">IO</a> a</td><td class="doc empty">&nbsp;</td></tr></table></div></div><div class="top"><p class="src"><a id="v:runClientWith" class="def">runClientWith</a> <a href="src/Network.WebSockets.Client.html#runClientWith" class="link">Source</a> <a href="#v:runClientWith" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="../base-4.10.1.0/Data-String.html#t:String">String</a></td><td class="doc"><p>Host</p></td></tr><tr><td class="src">-&gt; <a href="../base-4.10.1.0/Data-Int.html#t:Int">Int</a></td><td class="doc"><p>Port</p></td></tr><tr><td class="src">-&gt; <a href="../base-4.10.1.0/Data-String.html#t:String">String</a></td><td class="doc"><p>Path</p></td></tr><tr><td class="src">-&gt; <a href="Network-WebSockets.html#t:ConnectionOptions">ConnectionOptions</a></td><td class="doc"><p>Options</p></td></tr><tr><td class="src">-&gt; <a href="Network-WebSockets.html#t:Headers">Headers</a></td><td class="doc"><p>Custom headers to send</p></td></tr><tr><td class="src">-&gt; <a href="Network-WebSockets.html#t:ClientApp">ClientApp</a> a</td><td class="doc"><p>Client application</p></td></tr><tr><td class="src">-&gt; <a href="../base-4.10.1.0/System-IO.html#t:IO">IO</a> a</td><td class="doc empty">&nbsp;</td></tr></table></div></div><div class="top"><p class="src"><a id="v:runClientWithSocket" class="def">runClientWithSocket</a> <a href="src/Network.WebSockets.Client.html#runClientWithSocket" class="link">Source</a> <a href="#v:runClientWithSocket" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="../network-2.6.3.3/Network-Socket.html#t:Socket">Socket</a></td><td class="doc"><p>Socket</p></td></tr><tr><td class="src">-&gt; <a href="../base-4.10.1.0/Data-String.html#t:String">String</a></td><td class="doc"><p>Host</p></td></tr><tr><td class="src">-&gt; <a href="../base-4.10.1.0/Data-String.html#t:String">String</a></td><td class="doc"><p>Path</p></td></tr><tr><td class="src">-&gt; <a href="Network-WebSockets.html#t:ConnectionOptions">ConnectionOptions</a></td><td class="doc"><p>Options</p></td></tr><tr><td class="src">-&gt; <a href="Network-WebSockets.html#t:Headers">Headers</a></td><td class="doc"><p>Custom headers to send</p></td></tr><tr><td class="src">-&gt; <a href="Network-WebSockets.html#t:ClientApp">ClientApp</a> a</td><td class="doc"><p>Client application</p></td></tr><tr><td class="src">-&gt; <a href="../base-4.10.1.0/System-IO.html#t:IO">IO</a> a</td><td class="doc empty">&nbsp;</td></tr></table></div></div><div class="top"><p class="src"><a id="v:runClientWithStream" class="def">runClientWithStream</a> <a href="src/Network.WebSockets.Client.html#runClientWithStream" class="link">Source</a> <a href="#v:runClientWithStream" class="selflink">#</a></p><div class="subs arguments"><p class="caption">Arguments</p><table><tr><td class="src">:: <a href="Network-WebSockets-Stream.html#t:Stream">Stream</a></td><td class="doc"><p>Stream</p></td></tr><tr><td class="src">-&gt; <a href="../base-4.10.1.0/Data-String.html#t:String">String</a></td><td class="doc"><p>Host</p></td></tr><tr><td class="src">-&gt; <a href="../base-4.10.1.0/Data-String.html#t:String">String</a></td><td class="doc"><p>Path</p></td></tr><tr><td class="src">-&gt; <a href="Network-WebSockets.html#t:ConnectionOptions">ConnectionOptions</a></td><td class="doc"><p>Connection options</p></td></tr><tr><td class="src">-&gt; <a href="Network-WebSockets.html#t:Headers">Headers</a></td><td class="doc"><p>Custom headers to send</p></td></tr><tr><td class="src">-&gt; <a href="Network-WebSockets.html#t:ClientApp">ClientApp</a> a</td><td class="doc"><p>Client application</p></td></tr><tr><td class="src">-&gt; <a href="../base-4.10.1.0/System-IO.html#t:IO">IO</a> a</td><td class="doc empty">&nbsp;</td></tr></table></div></div><h1 id="g:13">Utilities</h1><div class="top"><p class="src"><a id="v:forkPingThread" class="def">forkPingThread</a> :: <a href="Network-WebSockets.html#t:Connection">Connection</a> -&gt; <a href="../base-4.10.1.0/Data-Int.html#t:Int">Int</a> -&gt; <a href="../base-4.10.1.0/System-IO.html#t:IO">IO</a> () <a href="src/Network.WebSockets.Connection.html#forkPingThread" class="link">Source</a> <a href="#v:forkPingThread" class="selflink">#</a></p><div class="doc"><p>Forks a ping thread, sending a ping message every <code>n</code> seconds over the
 connection. The thread dies silently if the connection crashes or is closed.</p><p>This is useful to keep idle connections open through proxies and whatnot.
 Many (but not all) proxies have a 60 second default timeout, so based on that
 sending a ping every 30 seconds is a good idea.</p></div></div></div></div><div id="footer"><p>Produced by <a href="http://www.haskell.org/haddock/">Haddock</a> version 2.18.1</p></div></body></html>